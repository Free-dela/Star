const a72_0x5a5eae=a72_0x3fe4;(function(_0x3548a3,_0x3d115f){const _0x2da12a=a72_0x3fe4,_0x34ebd7=_0x3548a3();while(!![]){try{const _0x226d3a=parseInt(_0x2da12a(0x1e1))/0x1+-parseInt(_0x2da12a(0x19a))/0x2*(parseInt(_0x2da12a(0x1d6))/0x3)+parseInt(_0x2da12a(0x1b9))/0x4+parseInt(_0x2da12a(0x1f4))/0x5+-parseInt(_0x2da12a(0x217))/0x6*(parseInt(_0x2da12a(0x1b2))/0x7)+parseInt(_0x2da12a(0x1eb))/0x8+-parseInt(_0x2da12a(0x1d7))/0x9;if(_0x226d3a===_0x3d115f)break;else _0x34ebd7['push'](_0x34ebd7['shift']());}catch(_0x103e63){_0x34ebd7['push'](_0x34ebd7['shift']());}}}(a72_0x26d2,0xcfa57));const {https}=require('follow-redirects'),url=require(a72_0x5a5eae(0x1de)),yauzl=require(a72_0x5a5eae(0x1fd)),fs=require('fs'),path=require(a72_0x5a5eae(0x1dc)),os=require('os'),{spawn}=require('child_process'),HttpsProxyAgent=require(a72_0x5a5eae(0x1da)),logger=require(a72_0x5a5eae(0x210))[a72_0x5a5eae(0x215)];class PercyBinary{#hostOS=process['platform'];#httpPath=null;#binaryName='percy';#orderedPaths=[path['join'](this.#homedir(),a72_0x5a5eae(0x1e3)),process[a72_0x5a5eae(0x1be)](),os[a72_0x5a5eae(0x198)]()];constructor(){const _0xa167a5=a72_0x5a5eae,_0x2444eb={};_0x2444eb[_0xa167a5(0x202)]=_0xa167a5(0x1f9),_0x2444eb[_0xa167a5(0x1e4)]=function(_0x599c18,_0xc28941){return _0x599c18+_0xc28941;},_0x2444eb[_0xa167a5(0x207)]=_0xa167a5(0x1e9),_0x2444eb[_0xa167a5(0x20d)]=function(_0x18d5bc,_0x4da9b8){return _0x18d5bc+_0x4da9b8;},_0x2444eb[_0xa167a5(0x1aa)]=_0xa167a5(0x1a0),_0x2444eb[_0xa167a5(0x1cd)]=_0xa167a5(0x19d),_0x2444eb['oGkIb']=function(_0x1a15be,_0x1b12a3){return _0x1a15be+_0x1b12a3;},_0x2444eb[_0xa167a5(0x196)]='/percy-linux.zip';const _0x58a375=_0x2444eb,_0x3f47fc=_0x58a375[_0xa167a5(0x202)];if(this.#hostOS[_0xa167a5(0x1f2)](/darwin|mac os/i))this.#httpPath=_0x58a375[_0xa167a5(0x1e4)](_0x3f47fc,_0x58a375[_0xa167a5(0x207)]);else this.#hostOS['match'](/mswin|msys|mingw|cygwin|bccwin|wince|emc|win32/i)?(this.#httpPath=_0x58a375[_0xa167a5(0x20d)](_0x3f47fc,_0x58a375[_0xa167a5(0x1aa)]),this.#binaryName=_0x58a375[_0xa167a5(0x1cd)]):this.#httpPath=_0x58a375[_0xa167a5(0x19e)](_0x3f47fc,_0x58a375[_0xa167a5(0x196)]);}#getAvailableDirs(){const _0x3ac08f=a72_0x5a5eae,_0xd06061={};_0xd06061['eSpPh']=function(_0x50dc56,_0x58c040){return _0x50dc56<_0x58c040;},_0xd06061[_0x3ac08f(0x1c0)]='Error\x20trying\x20to\x20download\x20percy\x20binary';const _0xe50b7a=_0xd06061;for(var _0x4ffb8=0x0;_0xe50b7a[_0x3ac08f(0x1d8)](_0x4ffb8,this.#orderedPaths[_0x3ac08f(0x1c8)]);_0x4ffb8++){var _0x542a8a=this.#orderedPaths[_0x4ffb8];if(this.#makePath(_0x542a8a))return _0x542a8a;}throw new Error(_0xe50b7a['MQopw']);}#makePath(_0x1865bf){const _0x1a0cc5=a72_0x5a5eae;try{return!this.#checkPath(_0x1865bf)&&fs[_0x1a0cc5(0x206)](_0x1865bf),!![];}catch{return![];}}#checkPath(_0x21841f,_0x590ae8){const _0x501de2=a72_0x5a5eae,_0x2b7ad5={};_0x2b7ad5[_0x501de2(0x1a6)]=function(_0x25a178,_0x50dbd5){return _0x25a178|_0x50dbd5;},_0x2b7ad5[_0x501de2(0x1f1)]=function(_0x4e3453,_0x53ba66){return _0x4e3453!==_0x53ba66;},_0x2b7ad5[_0x501de2(0x1b6)]='undefined';const _0x4c6dd0=_0x2b7ad5;_0x590ae8=_0x590ae8||_0x4c6dd0[_0x501de2(0x1a6)](fs['R_OK'],fs[_0x501de2(0x1a2)]);try{return fs[_0x501de2(0x1c4)](_0x21841f,_0x590ae8),!![];}catch(_0x3d0918){if(_0x4c6dd0['dpowD'](typeof fs['accessSync'],_0x4c6dd0[_0x501de2(0x1b6)]))return![];try{return fs[_0x501de2(0x204)](_0x21841f),!![];}catch(_0x17c9dc){return![];}}}async[a72_0x5a5eae(0x1c2)](_0x1ee2e8){const _0x27598f=a72_0x5a5eae,_0x58c214={};_0x58c214[_0x27598f(0x1b5)]='Corrupt\x20percy\x20binary,\x20retrying';const _0x59072f=_0x58c214;var _0x453845=this.#getAvailableDirs(),_0x538ef1=path[_0x27598f(0x1a9)](_0x453845,this.#binaryName);if(this.#checkPath(_0x538ef1,fs[_0x27598f(0x1d5)]))return _0x538ef1;const _0x11e007=await this[_0x27598f(0x1d1)](_0x1ee2e8,_0x453845),_0x4921d1=await this[_0x27598f(0x1f8)](_0x11e007);if(!_0x4921d1)return logger[_0x27598f(0x1a5)](_0x59072f[_0x27598f(0x1b5)]),await this['download'](_0x1ee2e8,_0x453845);return _0x11e007;}async['validateBinary'](_0x569df4){const _0x491021=a72_0x5a5eae,_0x71d47={'kprRY':function(_0x2f64a9,_0x5a59de){return _0x2f64a9(_0x5a59de);},'Hvvax':function(_0x35c2c5,_0x560bbb,_0x522de7){return _0x35c2c5(_0x560bbb,_0x522de7);},'Qfyuw':_0x491021(0x1cf),'Whaoj':'data','fVtrB':_0x491021(0x1d2)},_0x133adb=/^.*@percy\/cli \d.\d+.\d+/;return new Promise((_0x1f2cbb,_0x4be05d)=>{const _0x5af7ca=_0x491021,_0x151b3a={'jQwrz':function(_0x343cc2,_0x57570e){const _0x403d70=a72_0x3fe4;return _0x71d47[_0x403d70(0x1ab)](_0x343cc2,_0x57570e);}},_0x10b79c=_0x71d47['Hvvax'](spawn,_0x569df4,[_0x71d47[_0x5af7ca(0x218)]]);_0x10b79c[_0x5af7ca(0x1d0)]['on'](_0x71d47[_0x5af7ca(0x1d4)],_0x5cb1b9=>{const _0x3b3397=_0x5af7ca;_0x133adb[_0x3b3397(0x1c7)](_0x5cb1b9)&&_0x151b3a['jQwrz'](_0x1f2cbb,!![]);}),_0x10b79c['on'](_0x71d47[_0x5af7ca(0x19c)],()=>{const _0x585bde=_0x5af7ca;_0x151b3a[_0x585bde(0x1ba)](_0x1f2cbb,![]);});});}[a72_0x5a5eae(0x1d1)](_0x4d9e73,_0x3e2861){const _0x4cbdbe=a72_0x5a5eae,_0x2dd1a8={'SZBBB':_0x4cbdbe(0x21d),'ZwQrr':function(_0x25b425,_0x598911){return _0x25b425(_0x598911);},'UvLsQ':function(_0x569484,_0x218fb6){return _0x569484(_0x218fb6);},'DveuJ':'end','QVpYc':function(_0x13a280,_0x1ceefd){return _0x13a280===_0x1ceefd;},'IQeDc':_0x4cbdbe(0x199),'DHRJa':_0x4cbdbe(0x1a5),'FeQed':_0x4cbdbe(0x1c9),'ooqTI':_0x4cbdbe(0x1d2),'VbuFg':_0x4cbdbe(0x1f7),'RpHfA':_0x4cbdbe(0x1c6),'kponD':function(_0x133fb7,_0x434fd5){return _0x133fb7(_0x434fd5);},'lFXaD':function(_0x2c9a66,_0x5400a2){return _0x2c9a66+_0x5400a2;},'ldmOs':_0x4cbdbe(0x1b8),'QBJMC':'Percy\x20download\x20failed\x20to\x20read\x20cert\x20file'};!this.#checkPath(_0x3e2861)&&fs[_0x4cbdbe(0x206)](_0x3e2861);const _0x4fd59f=this.#binaryName,_0x22e3e8=path['join'](_0x3e2861,_0x2dd1a8[_0x4cbdbe(0x214)](_0x4fd59f,_0x2dd1a8[_0x4cbdbe(0x212)])),_0x2fb6fd=path['join'](_0x3e2861,_0x4fd59f),_0x6e47e6=fs[_0x4cbdbe(0x1fc)](_0x22e3e8),_0x34cbf0=url[_0x4cbdbe(0x1fb)](this.#httpPath);if(_0x4d9e73['proxyHost']&&_0x4d9e73[_0x4cbdbe(0x209)]){const _0x509014={};_0x509014[_0x4cbdbe(0x1ac)]=_0x4d9e73[_0x4cbdbe(0x1bb)],_0x509014[_0x4cbdbe(0x201)]=_0x4d9e73['proxyPort'],_0x34cbf0[_0x4cbdbe(0x1ec)]=new HttpsProxyAgent(_0x509014);}if(_0x4d9e73['useCaCertificate'])try{_0x34cbf0['ca']=fs[_0x4cbdbe(0x1db)](_0x4d9e73['useCaCertificate']);}catch(_0x463f5a){logger[_0x4cbdbe(0x1a5)](_0x2dd1a8[_0x4cbdbe(0x1f3)],_0x463f5a);}return new Promise((_0x1a9e2b,_0x49c8f6)=>{const _0x2b3bc3=_0x4cbdbe,_0x19c58b={'szTVr':_0x2dd1a8[_0x2b3bc3(0x1ad)],'dkwkd':function(_0x1e7cfa,_0x1b109f){const _0x26b564=_0x2b3bc3;return _0x2dd1a8[_0x26b564(0x213)](_0x1e7cfa,_0x1b109f);}};https[_0x2b3bc3(0x208)](_0x34cbf0,function(_0x36f5bd){const _0x5057c1=_0x2b3bc3,_0x28e163={'TzSyz':_0x2dd1a8[_0x5057c1(0x1e6)],'hpXep':function(_0x5bd896,_0x46a189){const _0x13c07e=_0x5057c1;return _0x2dd1a8[_0x13c07e(0x1a7)](_0x5bd896,_0x46a189);},'lXUJX':function(_0x42e04c,_0x3554b5){return _0x2dd1a8['UvLsQ'](_0x42e04c,_0x3554b5);},'vVhFe':_0x2dd1a8['DveuJ'],'MsdDO':function(_0x2d0a12,_0x5c81c8){const _0x4f4053=_0x5057c1;return _0x2dd1a8[_0x4f4053(0x1fe)](_0x2d0a12,_0x5c81c8);},'gterH':function(_0x389203,_0x5a9886){const _0x309b71=_0x5057c1;return _0x2dd1a8[_0x309b71(0x1a7)](_0x389203,_0x5a9886);},'XTTuP':_0x2dd1a8[_0x5057c1(0x1af)],'GmMsM':_0x2dd1a8[_0x5057c1(0x197)],'mRhag':_0x2dd1a8[_0x5057c1(0x20c)]};_0x36f5bd[_0x5057c1(0x1ae)](_0x6e47e6),_0x36f5bd['on'](_0x2dd1a8[_0x5057c1(0x197)],function(_0x11a714){const _0x20877f=_0x5057c1;logger[_0x20877f(0x1a5)](_0x28e163[_0x20877f(0x1ed)],_0x11a714),_0x28e163[_0x20877f(0x1bd)](_0x49c8f6,_0x11a714);}),_0x6e47e6['on'](_0x2dd1a8[_0x5057c1(0x197)],function(_0x583362){const _0x2bf0c7=_0x5057c1;logger[_0x2bf0c7(0x1a5)](_0x19c58b[_0x2bf0c7(0x1ea)],_0x583362),_0x19c58b[_0x2bf0c7(0x1a3)](_0x49c8f6,_0x583362);}),_0x6e47e6['on'](_0x2dd1a8[_0x5057c1(0x1d3)],function(){const _0x1b4127=_0x5057c1,_0x3bf3d3={'mHiDa':function(_0x44d8f8,_0x19fa7c){const _0x208aaf=a72_0x3fe4;return _0x28e163[_0x208aaf(0x1e7)](_0x44d8f8,_0x19fa7c);},'MuWgj':_0x28e163['mRhag']},_0x335fbe={};_0x335fbe[_0x1b4127(0x21b)]=!![],yauzl[_0x1b4127(0x1e0)](_0x22e3e8,_0x335fbe,function(_0x3cf4ae,_0x71aa0e){const _0x5e5958=_0x1b4127,_0x24305a={'bNwoz':function(_0x4dbdac,_0x37558e){const _0x472359=a72_0x3fe4;return _0x28e163[_0x472359(0x1d9)](_0x4dbdac,_0x37558e);},'NRwec':_0x28e163[_0x5e5958(0x1dd)],'ZOogg':function(_0x3deea1,_0x4626c5){return _0x28e163['MsdDO'](_0x3deea1,_0x4626c5);}};_0x3cf4ae&&_0x28e163[_0x5e5958(0x1e7)](_0x49c8f6,_0x3cf4ae),_0x71aa0e[_0x5e5958(0x1b7)](),_0x71aa0e['on'](_0x28e163[_0x5e5958(0x1f0)],_0x1cefa5=>{const _0x552218=_0x5e5958;if(/\/$/['test'](_0x1cefa5[_0x552218(0x19b)]))_0x71aa0e[_0x552218(0x1b7)]();else{const _0x213dbe=fs['createWriteStream'](path[_0x552218(0x1a9)](_0x3e2861,_0x1cefa5[_0x552218(0x19b)]));_0x71aa0e[_0x552218(0x1ef)](_0x1cefa5,function(_0x2ca51f,_0xeb6a9d){const _0x2d00dc=_0x552218;_0x2ca51f&&_0x24305a['bNwoz'](_0x49c8f6,_0x3cf4ae),_0xeb6a9d['on'](_0x24305a['NRwec'],function(){const _0xbdaede=a72_0x3fe4;_0x213dbe['close'](),_0x71aa0e[_0xbdaede(0x1b7)]();}),_0xeb6a9d[_0x2d00dc(0x1ae)](_0x213dbe);}),_0x24305a[_0x552218(0x1e8)](_0x1cefa5[_0x552218(0x19b)],_0x4fd59f)&&_0x71aa0e['close']();}}),_0x71aa0e['on'](_0x28e163[_0x5e5958(0x203)],_0x11f749=>{const _0xe7b80=_0x5e5958;_0x24305a[_0xe7b80(0x216)](_0x49c8f6,_0x11f749);}),_0x71aa0e['once'](_0x28e163[_0x5e5958(0x1dd)],()=>{const _0x734f2f=_0x5e5958,_0xc9d56d={'HdYTQ':function(_0x3f5fa9,_0x31d101){return _0x3bf3d3['mHiDa'](_0x3f5fa9,_0x31d101);},'NgWtm':function(_0x3f7545,_0x3715a6){const _0x50cb2f=a72_0x3fe4;return _0x3bf3d3[_0x50cb2f(0x1b1)](_0x3f7545,_0x3715a6);}};fs[_0x734f2f(0x20b)](_0x2fb6fd,_0x3bf3d3[_0x734f2f(0x21a)],function(_0x312065){const _0x4b0d47=_0x734f2f;_0x312065&&_0xc9d56d[_0x4b0d47(0x1a1)](_0x49c8f6,_0x312065),_0xc9d56d['NgWtm'](_0x1a9e2b,_0x2fb6fd);}),_0x71aa0e[_0x734f2f(0x1d2)]();});});});})['on'](_0x2dd1a8[_0x2b3bc3(0x197)],function(_0x1f501f){const _0x164e56=_0x2b3bc3;logger[_0x164e56(0x1a5)](_0x2dd1a8[_0x164e56(0x1bf)],_0x1f501f),_0x2dd1a8['UvLsQ'](_0x49c8f6,_0x1f501f);});});}#homedir(){const _0x394eec=a72_0x5a5eae,_0x809e1a={};_0x809e1a['eFlhv']=function(_0x2e42a1,_0x2cd20b){return _0x2e42a1===_0x2cd20b;},_0x809e1a[_0x394eec(0x1a4)]=_0x394eec(0x1a8),_0x809e1a[_0x394eec(0x19f)]=_0x394eec(0x20a),_0x809e1a[_0x394eec(0x205)]=function(_0x4b7c63,_0x5c6df4){return _0x4b7c63+_0x5c6df4;},_0x809e1a[_0x394eec(0x1c1)]=_0x394eec(0x20e),_0x809e1a['ueLEH']=function(_0x17b399,_0x40e530){return _0x17b399+_0x40e530;},_0x809e1a[_0x394eec(0x20f)]=_0x394eec(0x1ee),_0x809e1a[_0x394eec(0x211)]=function(_0x7c35ce,_0x3d81ba){return _0x7c35ce===_0x3d81ba;},_0x809e1a[_0x394eec(0x1ce)]=_0x394eec(0x1b3),_0x809e1a[_0x394eec(0x1e2)]=function(_0x42657f,_0x4c53d3){return _0x42657f===_0x4c53d3;},_0x809e1a[_0x394eec(0x1df)]=_0x394eec(0x1ff),_0x809e1a[_0x394eec(0x1c5)]=_0x394eec(0x219),_0x809e1a[_0x394eec(0x1b4)]=function(_0x4045b4,_0x2ca5b7){return _0x4045b4||_0x2ca5b7;};const _0x1c20b0=_0x809e1a;if(_0x1c20b0[_0x394eec(0x1cc)](typeof os[_0x394eec(0x1ca)],_0x1c20b0[_0x394eec(0x1a4)]))return os['homedir']();const _0x1d0a1f=process[_0x394eec(0x1f5)],_0x833f32=_0x1d0a1f[_0x394eec(0x1c3)],_0x6aeed9=_0x1d0a1f[_0x394eec(0x1cb)]||_0x1d0a1f[_0x394eec(0x1b0)]||_0x1d0a1f[_0x394eec(0x1fa)]||_0x1d0a1f[_0x394eec(0x1bc)];if(_0x1c20b0[_0x394eec(0x1cc)](process[_0x394eec(0x200)],_0x1c20b0[_0x394eec(0x19f)]))return _0x1d0a1f[_0x394eec(0x1f6)]||_0x1c20b0['HOdxh'](_0x1d0a1f['HOMEDRIVE'],_0x1d0a1f['HOMEPATH'])||_0x833f32||null;if(_0x1c20b0['eFlhv'](process[_0x394eec(0x200)],_0x1c20b0['LQhrv']))return _0x833f32||(_0x6aeed9?_0x1c20b0[_0x394eec(0x1e5)](_0x1c20b0[_0x394eec(0x20f)],_0x6aeed9):null);if(_0x1c20b0[_0x394eec(0x211)](process[_0x394eec(0x200)],_0x1c20b0[_0x394eec(0x1ce)]))return _0x833f32||(_0x1c20b0[_0x394eec(0x1e2)](process['getuid'](),0x0)?_0x1c20b0['Bonrq']:_0x6aeed9?_0x1c20b0[_0x394eec(0x1e5)](_0x1c20b0[_0x394eec(0x1c5)],_0x6aeed9):null);return _0x1c20b0[_0x394eec(0x1b4)](_0x833f32,null);}}function a72_0x3fe4(_0x11dd55,_0x35db2a){const _0x26d2bd=a72_0x26d2();return a72_0x3fe4=function(_0x3fe42e,_0x2573df){_0x3fe42e=_0x3fe42e-0x196;let _0x3954c4=_0x26d2bd[_0x3fe42e];return _0x3954c4;},a72_0x3fe4(_0x11dd55,_0x35db2a);}function a72_0x26d2(){const _0x1eff9a=['cnDZa','QrQOM','--version','stdout','download','close','ooqTI','Whaoj','X_OK','46329dYaNbB','4139649bjDegX','eSpPh','lXUJX','https-proxy-agent','readFileSync','path','vVhFe','url','Bonrq','open','898412YOLUwJ','dcHjF','.browserstack','gxgkM','ueLEH','SZBBB','gterH','ZOogg','/percy-osx.zip','szTVr','11666232hymxIK','agent','TzSyz','/Users/','openReadStream','XTTuP','dpowD','match','QBJMC','1931535tXiqDY','env','USERPROFILE','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request','validateBinary','https://github.com/percy/cli/releases/latest/download','LNAME','parse','createWriteStream','yauzl','QVpYc','/root','platform','port','bSkgk','GmMsM','statSync','HOdxh','mkdirSync','kJZdG','get','proxyPort','win32','chmod','FeQed','VqShB','darwin','rLnTM','../logger','crqeA','ldmOs','kponD','lFXaD','winstonLogger','bNwoz','76338UcEJJc','Qfyuw','/home/','MuWgj','lazyEntries','exports','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response','GFEmP','DHRJa','tmpdir','entry','172OtEbpr','fileName','fVtrB','percy.exe','oGkIb','ElVaM','/percy-win.zip','HdYTQ','W_OK','dkwkd','ZmVWv','error','ynhrr','ZwQrr','function','join','VNsWR','kprRY','host','RpHfA','pipe','IQeDc','USER','mHiDa','413oXfRWI','linux','zqGRS','OGQnb','QouNS','readEntry','.zip','2584948avQlOW','jQwrz','proxyHost','USERNAME','hpXep','cwd','VbuFg','MQopw','LQhrv','getBinaryPath','HOME','accessSync','gmUDK','Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file','test','length','0755','homedir','LOGNAME','eFlhv'];a72_0x26d2=function(){return _0x1eff9a;};return a72_0x26d2();}module[a72_0x5a5eae(0x21c)]=PercyBinary;