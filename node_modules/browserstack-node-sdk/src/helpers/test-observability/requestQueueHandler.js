const a85_0x104d6=a85_0x39cf;(function(_0x1f521d,_0x334034){const _0x307e8e=a85_0x39cf,_0x134263=_0x1f521d();while(!![]){try{const _0x52881f=-parseInt(_0x307e8e(0x190))/0x1*(parseInt(_0x307e8e(0x1ce))/0x2)+-parseInt(_0x307e8e(0x1f0))/0x3*(parseInt(_0x307e8e(0x1e0))/0x4)+parseInt(_0x307e8e(0x1d2))/0x5+-parseInt(_0x307e8e(0x1b5))/0x6+parseInt(_0x307e8e(0x1dd))/0x7*(parseInt(_0x307e8e(0x195))/0x8)+-parseInt(_0x307e8e(0x1ba))/0x9+parseInt(_0x307e8e(0x1ed))/0xa*(parseInt(_0x307e8e(0x1eb))/0xb);if(_0x52881f===_0x334034)break;else _0x134263['push'](_0x134263['shift']());}catch(_0x4703dd){_0x134263['push'](_0x134263['shift']());}}}(a85_0xaa36,0x5294d));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a85_0x104d6(0x1c9)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a85_0x104d6(0x1c3)),{nestedKeyValue}=require(a85_0x104d6(0x1d0)),util=require('util');function a85_0xaa36(){const _0x316572=['slice','QKKKo','xWNLJ','CBTSessionCreated','Interval-Queue','ReQkN','RESETTING','TEST_SCREENSHOT','max','2|3|4|5|0|1','3115314rJQlpk','response','kind','utf8','\x20--\x20','2004984UgKBZt','kGoJA','afgZJ','push','logs','eUIbq','started','Shutdown-Queue','startEventBatchPolling','./utils','rADua','format','bxRAY','byteLength','Processing\x20batch\x20events\x20for\x20','./constants','bJSDD','start','YEZnS','error','23670PNjboU','uploadPending','../helper','HBxsT','1207025vndjCR','pendingUploads','NNeHB','uuid','TgEnr','instance','HabwS','eventUrl','POST','data','join','365953EtGUGo','vPZob','map','248rquUKm','TestRunFinished','REMOVING','splice','status','BATCH_EVENT_TYPES','utrFN','qyjzu','\x20bytes.\x20Events\x20are\x20','OamAb','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','154vLBqYo','statusText','764140wiIdRR','resetEventBatchPolling','length','19242eHLqde','.\x20Request\x20Size\x20-\x20','exmSS','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','removeEventBatchPolling','8SFriVA','pollEventBatchInterval','\x20event\x20successful\x20for\x20events\x20','test_run','includes','40JUEXxV','AfLdd','cROLT','JbjCd','batchAndPostEvents','hook_run','vEVEv','shouldProceed','uQTid','split','HookRunStarted','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','EXCEPTION\x20IN\x20','screenshotEventUrl','proceedWithData','Ieogs','message','TestRunSkipped','event_type','queue','JEbpq','HyfMz'];a85_0xaa36=function(){return _0x316572;};return a85_0xaa36();}class RequestQueueHandler{static ['instance'];[a85_0x104d6(0x1d3)]=0x0;constructor(){const _0x61c137=a85_0x104d6,_0x53ad0f={};_0x53ad0f['AfLdd']=_0x61c137(0x1b4),_0x53ad0f[_0x61c137(0x1bc)]='LogCreated',_0x53ad0f[_0x61c137(0x19d)]=_0x61c137(0x1ae),_0x53ad0f[_0x61c137(0x197)]=_0x61c137(0x1e1),_0x53ad0f[_0x61c137(0x1c4)]=_0x61c137(0x1a6),_0x53ad0f['bJSDD']='HookRunFinished',_0x53ad0f[_0x61c137(0x1e9)]='TestRunStarted',_0x53ad0f['QewAd']=_0x61c137(0x19f),_0x53ad0f['JEbpq']='api/v1/batch',_0x53ad0f[_0x61c137(0x1d4)]='api/v1/screenshots';const _0x3e29b4=_0x53ad0f,_0x5664d5=_0x3e29b4[_0x61c137(0x196)][_0x61c137(0x19e)]('|');let _0x374df3=0x0;while(!![]){switch(_0x5664d5[_0x374df3++]){case'0':this[_0x61c137(0x1e5)]=[_0x3e29b4['afgZJ'],_0x3e29b4[_0x61c137(0x19d)],_0x3e29b4[_0x61c137(0x197)],_0x3e29b4['rADua'],_0x3e29b4[_0x61c137(0x1ca)],_0x3e29b4[_0x61c137(0x1e9)],_0x3e29b4['QewAd']];continue;case'1':this[_0x61c137(0x191)]=null;continue;case'2':this[_0x61c137(0x1a8)]=[];continue;case'3':this[_0x61c137(0x1c0)]=![];continue;case'4':this[_0x61c137(0x1d9)]=_0x3e29b4[_0x61c137(0x1a9)];continue;case'5':this[_0x61c137(0x1a2)]=_0x3e29b4[_0x61c137(0x1d4)];continue;}break;}}static['getInstance'](){const _0x338af4=a85_0x104d6;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x338af4(0x1d7)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a85_0x104d6(0x1cb)]=()=>{const _0x6201d4=a85_0x104d6;!this[_0x6201d4(0x1c0)]&&(this[_0x6201d4(0x1c0)]=!![],this[_0x6201d4(0x1c2)]());};['add']=_0x296856=>{const _0x15a28b=a85_0x104d6,_0xc0014e={'gKoVy':function(_0x35d69d,_0x38df8c){return _0x35d69d===_0x38df8c;},'HyfMz':_0x15a28b(0x1b2),'YPbOF':function(_0x21ed57,_0x21c010){return _0x21ed57(_0x21c010);},'bxRAY':_0x15a28b(0x1a0)};if(this[_0x15a28b(0x1e5)][_0x15a28b(0x194)](_0x296856[_0x15a28b(0x1a7)])){if(_0x296856[_0x15a28b(0x1be)]&&_0x296856[_0x15a28b(0x1be)][0x0]&&_0xc0014e['gKoVy'](_0x296856[_0x15a28b(0x1be)][0x0][_0x15a28b(0x1b7)],_0xc0014e[_0x15a28b(0x1aa)])){const _0x21c57f={};return _0x21c57f[_0x15a28b(0x19c)]=!![],_0x21c57f[_0x15a28b(0x1a3)]=[_0x296856],_0x21c57f['proceedWithUrl']=this[_0x15a28b(0x1a2)],_0x21c57f;}this['queue'][_0x15a28b(0x1bd)](_0x296856);let _0x177c1b=null;const _0x8c603c=this[_0x15a28b(0x19c)]();_0x8c603c&&(_0xc0014e['YPbOF'](trace,_0xc0014e[_0x15a28b(0x1c6)]),_0x177c1b=this['queue'][_0x15a28b(0x1ab)](0x0,BATCH_SIZE),this[_0x15a28b(0x1a8)][_0x15a28b(0x1e3)](0x0,BATCH_SIZE),this[_0x15a28b(0x1ee)]());const _0x1efed4={};return _0x1efed4[_0x15a28b(0x19c)]=_0x8c603c,_0x1efed4[_0x15a28b(0x1a3)]=_0x177c1b,_0x1efed4['proceedWithUrl']=this[_0x15a28b(0x1d9)],_0x1efed4;}const _0x4b74fb={};return _0x4b74fb[_0x15a28b(0x19c)]=!![],_0x4b74fb;};['shutdown']=async()=>{const _0x4de12a=a85_0x104d6,_0x2cc2c9={'vlhzd':_0x4de12a(0x1e2),'ReQkN':function(_0x1b5865,_0xe7a2f7){return _0x1b5865>_0xe7a2f7;},'qyjzu':_0x4de12a(0x1c1),'xWNLJ':function(_0x4d57e2,_0x1a3404){return _0x4d57e2(_0x1a3404);}};await this[_0x4de12a(0x1cf)](),this[_0x4de12a(0x18f)](_0x2cc2c9['vlhzd']);while(_0x2cc2c9[_0x4de12a(0x1b0)](this[_0x4de12a(0x1a8)][_0x4de12a(0x1ef)],0x0)){const _0x47bc7d=this[_0x4de12a(0x1a8)][_0x4de12a(0x1ab)](0x0,BATCH_SIZE);this[_0x4de12a(0x1a8)][_0x4de12a(0x1e3)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x4de12a(0x1d9)],_0x2cc2c9[_0x4de12a(0x1e7)],_0x47bc7d);}_0x2cc2c9['ReQkN'](this[_0x4de12a(0x1d3)],0x0)&&_0x2cc2c9[_0x4de12a(0x1ad)](debug,_0x4de12a(0x1ea)+this[_0x4de12a(0x1d3)]);};[a85_0x104d6(0x199)]=async(_0x5bc3e2,_0x47a53a,_0x2af64c)=>{const _0x5e07fe=a85_0x104d6,_0x27cb70={'kGoJA':function(_0x184bdc,_0x12057e){return _0x184bdc(_0x12057e);},'Ieogs':_0x5e07fe(0x1b8),'KrCcp':function(_0x515cdf){return _0x515cdf();},'pXvjA':function(_0x22f7f6,_0xc3ca70,_0x1615d1,_0x19614e,_0x50c075){return _0x22f7f6(_0xc3ca70,_0x1615d1,_0x19614e,_0x50c075);},'JbjCd':_0x5e07fe(0x1da),'QKKKo':function(_0x18e659,_0x4e132f){return _0x18e659-_0x4e132f;}};let _0x187434='';try{_0x187434=_0x2af64c[_0x5e07fe(0x1df)](_0x3d2392=>'\x27'+_0x3d2392[_0x5e07fe(0x1a7)]+'\x27:'+(nestedKeyValue(_0x3d2392,[_0x5e07fe(0x193),_0x5e07fe(0x1d5)])||nestedKeyValue(_0x3d2392,[_0x5e07fe(0x19a),_0x5e07fe(0x1d5)])))[_0x5e07fe(0x1dc)](','),_0x27cb70[_0x5e07fe(0x1bb)](debug,_0x5e07fe(0x1c8)+_0x47a53a+_0x5e07fe(0x18c)+Buffer[_0x5e07fe(0x1c7)](util['format']('%j',_0x2af64c),_0x27cb70[_0x5e07fe(0x1a4)])+_0x5e07fe(0x1e8)+_0x187434);}catch(_0x1b218e){_0x27cb70[_0x5e07fe(0x1bb)](debug,_0x5e07fe(0x18e)+util[_0x5e07fe(0x1c5)](_0x1b218e)+'}');}const _0x4f5e10={'headers':_0x27cb70['KrCcp'](getDefaultHeaders)};try{const _0x323dfe=await _0x27cb70['pXvjA'](nodeRequest,_0x27cb70[_0x5e07fe(0x198)],_0x5bc3e2,_0x2af64c,_0x4f5e10);if(_0x323dfe[_0x5e07fe(0x1db)][_0x5e07fe(0x1cd)]){const _0x5d5575={};_0x5d5575[_0x5e07fe(0x1a5)]=_0x323dfe[_0x5e07fe(0x1db)][_0x5e07fe(0x1cd)];throw _0x5d5575;}else _0x27cb70['kGoJA'](debug,_0x47a53a+_0x5e07fe(0x192)+_0x187434+_0x5e07fe(0x1b9)+util[_0x5e07fe(0x1c5)]('%j',_0x323dfe[_0x5e07fe(0x1db)])),this[_0x5e07fe(0x1d3)]=Math['max'](0x0,_0x27cb70['QKKKo'](this['pendingUploads'],_0x2af64c[_0x5e07fe(0x1ef)]));}catch(_0x195541){_0x195541[_0x5e07fe(0x1b6)]?_0x27cb70[_0x5e07fe(0x1bb)](debug,_0x5e07fe(0x1a1)+_0x47a53a+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x195541[_0x5e07fe(0x1b6)][_0x5e07fe(0x1e4)]+'\x20'+_0x195541[_0x5e07fe(0x1b6)][_0x5e07fe(0x1ec)]+'\x20'+util[_0x5e07fe(0x1c5)]('%j',_0x195541[_0x5e07fe(0x1b6)])):_0x27cb70[_0x5e07fe(0x1bb)](debug,_0x5e07fe(0x1a1)+_0x47a53a+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+(_0x195541['message']||_0x195541)),this['pendingUploads']=Math[_0x5e07fe(0x1b3)](0x0,_0x27cb70[_0x5e07fe(0x1ac)](this[_0x5e07fe(0x1d3)],_0x2af64c[_0x5e07fe(0x1ef)]));}};[a85_0x104d6(0x1c2)]=()=>{const _0x19618e=a85_0x104d6,_0x52501e={'utrFN':function(_0x5826ed,_0x4b1a18){return _0x5826ed>_0x4b1a18;},'TgEnr':function(_0x789ac5,_0x50bd82){return _0x789ac5(_0x50bd82);},'pHcLU':_0x19618e(0x1af),'vPZob':function(_0x480ab6,_0x3bc91e,_0x2afe36){return _0x480ab6(_0x3bc91e,_0x2afe36);}};this[_0x19618e(0x191)]=_0x52501e[_0x19618e(0x1de)](setInterval,async()=>{const _0x4d462d=_0x19618e;if(_0x52501e[_0x4d462d(0x1e6)](this['queue']['length'],0x0)){_0x52501e[_0x4d462d(0x1d6)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x4d462d(0x1a8)]['length']);const _0x24c14f=this['queue']['slice'](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this[_0x4d462d(0x199)](this['eventUrl'],_0x52501e['pHcLU'],_0x24c14f),_0x52501e[_0x4d462d(0x1d6)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x4d462d(0x1a8)]['length']);}},BATCH_INTERVAL);};[a85_0x104d6(0x1ee)]=()=>{const _0x527f76=a85_0x104d6,_0x569316={};_0x569316['HabwS']=_0x527f76(0x1b1);const _0x4885d1=_0x569316;this[_0x527f76(0x18f)](_0x4885d1[_0x527f76(0x1d8)]),this[_0x527f76(0x1c2)]();};['removeEventBatchPolling']=_0x1f26f1=>{const _0x51af1c=a85_0x104d6,_0x368d6b={'eUIbq':function(_0x274984,_0x29a6fc){return _0x274984(_0x29a6fc);},'HRcpK':function(_0x5473b4,_0x1a5193){return _0x5473b4===_0x1a5193;},'HExVB':_0x51af1c(0x1e2)};this[_0x51af1c(0x191)]&&(_0x368d6b[_0x51af1c(0x1bf)](clearInterval,this[_0x51af1c(0x191)]),this[_0x51af1c(0x191)]=null,_0x368d6b['HRcpK'](_0x1f26f1,_0x368d6b['HExVB'])&&(this['started']=![]));};[a85_0x104d6(0x19c)]=()=>{const _0x261f8f=a85_0x104d6,_0xc2f84e={};_0xc2f84e[_0x261f8f(0x1cc)]=function(_0x5c3b87,_0x5c31fe){return _0x5c3b87>=_0x5c31fe;};const _0x4a014d=_0xc2f84e;return _0x4a014d[_0x261f8f(0x1cc)](this[_0x261f8f(0x1a8)]['length'],BATCH_SIZE);};async[a85_0x104d6(0x1cf)](_0x5bd8d0=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x434939=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1d56f6=a85_0x104d6,_0x346a62={'vEVEv':function(_0x4dbcf6,_0x369eee){return _0x4dbcf6<=_0x369eee;},'HBxsT':function(_0x48d3ed,_0x4ec3eb){return _0x48d3ed(_0x4ec3eb);},'exmSS':function(_0x25de4f,_0x2e0ab6){return _0x25de4f-_0x2e0ab6;}};if(_0x346a62[_0x1d56f6(0x19b)](this[_0x1d56f6(0x1d3)],0x0)||_0x346a62['vEVEv'](_0x5bd8d0,0x0))return;return await _0x346a62[_0x1d56f6(0x1d1)](sleep,_0x434939),this[_0x1d56f6(0x1cf)](_0x346a62[_0x1d56f6(0x18d)](_0x5bd8d0,_0x434939));}}function a85_0x39cf(_0x44eb09,_0x220e5e){const _0xaa3649=a85_0xaa36();return a85_0x39cf=function(_0x39cf84,_0x33f923){_0x39cf84=_0x39cf84-0x18c;let _0x47324c=_0xaa3649[_0x39cf84];return _0x47324c;},a85_0x39cf(_0x44eb09,_0x220e5e);}module['exports']=RequestQueueHandler;