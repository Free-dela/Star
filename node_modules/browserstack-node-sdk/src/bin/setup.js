#!/usr/bin/env node

const a45_0x2c8400=a45_0x43cb;(function(_0x39649e,_0x52022a){const _0x5824b4=a45_0x43cb,_0x3be519=_0x39649e();while(!![]){try{const _0x398836=parseInt(_0x5824b4(0x1b1))/0x1*(parseInt(_0x5824b4(0x1a6))/0x2)+-parseInt(_0x5824b4(0x1e1))/0x3*(parseInt(_0x5824b4(0x1ce))/0x4)+parseInt(_0x5824b4(0x1a0))/0x5+parseInt(_0x5824b4(0x1dd))/0x6*(parseInt(_0x5824b4(0x19a))/0x7)+-parseInt(_0x5824b4(0x1a4))/0x8+-parseInt(_0x5824b4(0x1ba))/0x9*(parseInt(_0x5824b4(0x1a9))/0xa)+parseInt(_0x5824b4(0x1cf))/0xb;if(_0x398836===_0x52022a)break;else _0x3be519['push'](_0x3be519['shift']());}catch(_0x53c57f){_0x3be519['push'](_0x3be519['shift']());}}}(a45_0x182a,0x42e34));const fs=require('fs'),helper=require(a45_0x2c8400(0x196)),utilities=require(a45_0x2c8400(0x1c8)),yaml=require(a45_0x2c8400(0x1cd)),yargs=require('yargs'),logger=require(a45_0x2c8400(0x1c1))[a45_0x2c8400(0x1a7)],configFileTemplate=__dirname+a45_0x2c8400(0x1ac),configFileTemplatePW=__dirname+a45_0x2c8400(0x195),configFile=process[a45_0x2c8400(0x1c5)]()+a45_0x2c8400(0x194),packageFile=process[a45_0x2c8400(0x1c5)]()+a45_0x2c8400(0x1b2),frameworks=[a45_0x2c8400(0x1b8),a45_0x2c8400(0x1ae),'cucumber-js',a45_0x2c8400(0x1a1),a45_0x2c8400(0x19f),a45_0x2c8400(0x193),a45_0x2c8400(0x1d5)];let config;logger['info'](a45_0x2c8400(0x1a5)),createConfigurationFile(yargs[a45_0x2c8400(0x1d6)][a45_0x2c8400(0x1db)],yargs[a45_0x2c8400(0x1d6)]['key'],yargs[a45_0x2c8400(0x1d6)][a45_0x2c8400(0x1d5)]);try{sdkSetup();}catch(a45_0xa32fb7){logger[a45_0x2c8400(0x1cb)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0xa32fb7);}addScriptInPackageJson();function a45_0x182a(){const _0x15f6e4=['Adding\x20new\x20script(s)\x20in\x20package.json...','10KBqRfW','writeFileSync','readFileSync','/../../browserstack.yml.sample','tqLAC','jest','GFwwU','rcVLg','66053sORVZy','/package.json','KfWHW','source','error','parse','sdKcY','mocha','ixCrG','3511476EiNcdW','browserstack-node-sdk\x20','length','ctYWL','replace','split','pFWZy','../helpers/logger','xPhqY','fireFunnelTestEvent','info','cwd','-browserstack','\x20&&\x20npm\x20update\x20browserstack-node-sdk','../helpers/utilities','YOUR_USERNAME','OJwMx','debug','npm\x20update\x20browserstack-node-sdk','js-yaml','180RJBCuD','9594970YGzsfl','Bwrpr','indexOf','utf8','browserstack-node-sdk','YXmeL','playwright','argv','rpwCw','entries','push','scripts','username','splice','3277542koARuU','TEWIL','YOUR_ACCESS_KEY','SDKSetup','32493UbiclS','codeceptjs','/browserstack.yml','/../../browserstack.pw.yml.sample','../helpers/helper','ESDbH','postinstall','wPayT','7WgIjfW','stringify','IJtcN','includes','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','nightwatch','546250vhEGyz','node','vpKXF','isUndefined','3538392AOTsKn','Creating\x20configuration\x20file...','2igwyyN','winstonLogger'];a45_0x182a=function(){return _0x15f6e4;};return a45_0x182a();}function createConfigurationFile(_0xa2474,_0x248377,_0x1a6ceb=![]){const _0x4dde16=a45_0x2c8400,_0x1a612b={};_0x1a612b[_0x4dde16(0x1b3)]=_0x4dde16(0x1d2),_0x1a612b['TEWIL']=_0x4dde16(0x1c9),_0x1a612b[_0x4dde16(0x1d0)]=_0x4dde16(0x1df);const _0x338855=_0x1a612b;try{let _0x8b0b27=fs[_0x4dde16(0x1ab)](_0x1a6ceb?configFileTemplatePW:configFileTemplate,_0x338855[_0x4dde16(0x1b3)]);_0xa2474&&(_0x8b0b27=_0x8b0b27[_0x4dde16(0x1be)](_0x338855[_0x4dde16(0x1de)],_0xa2474)),_0x248377&&(_0x8b0b27=_0x8b0b27[_0x4dde16(0x1be)](_0x338855['Bwrpr'],_0x248377)),config=yaml['load'](_0x8b0b27),fs[_0x4dde16(0x1aa)](configFile,_0x8b0b27,_0x21704e=>{const _0x126097=_0x4dde16;_0x21704e&&logger[_0x126097(0x1b5)](_0x21704e);});}catch(_0x1b6f34){logger[_0x4dde16(0x1b5)](_0x1b6f34);}}function a45_0x43cb(_0x25d26d,_0xce222c){const _0x182ab1=a45_0x182a();return a45_0x43cb=function(_0x43cb4c,_0x202f8b){_0x43cb4c=_0x43cb4c-0x193;let _0x5d7620=_0x182ab1[_0x43cb4c];return _0x5d7620;},a45_0x43cb(_0x25d26d,_0xce222c);}function addPostInstallScript(_0x6c2830,_0x3530dd){const _0x5a3e5c=a45_0x2c8400,_0x25b4aa={};_0x25b4aa[_0x5a3e5c(0x1d7)]=_0x5a3e5c(0x198),_0x25b4aa[_0x5a3e5c(0x19c)]=_0x5a3e5c(0x1cc),_0x25b4aa[_0x5a3e5c(0x1ca)]=_0x5a3e5c(0x1c7);const _0x4276f2=_0x25b4aa;let _0x13f0c9=_0x6c2830[_0x4276f2[_0x5a3e5c(0x1d7)]];if(_0x13f0c9&&_0x13f0c9[_0x5a3e5c(0x19d)](_0x4276f2['IJtcN']))return;!_0x13f0c9?_0x13f0c9=_0x4276f2['IJtcN']:_0x13f0c9+=_0x4276f2[_0x5a3e5c(0x1ca)],_0x3530dd[_0x5a3e5c(0x1d9)]([_0x4276f2[_0x5a3e5c(0x1d7)],_0x13f0c9]);}function addScriptInPackageJson(){const _0x51ce50=a45_0x2c8400,_0x18cd2b={'JemFH':_0x51ce50(0x1d2),'xPhqY':function(_0xdbd1cf,_0x378876){return _0xdbd1cf<_0x378876;},'wPayT':function(_0x5d6247,_0x162885,_0x257476){return _0x5d6247(_0x162885,_0x257476);},'dEdWg':function(_0x2cda82,_0x5d38d5,_0x450c15){return _0x2cda82(_0x5d38d5,_0x450c15);},'pFWZy':function(_0x207373,_0x86f93d){return _0x207373<_0x86f93d;},'GFwwU':function(_0x2c371c,_0x3a7029){return _0x2c371c!==_0x3a7029;},'vpKXF':_0x51ce50(0x1a8)},_0x1263d6=JSON[_0x51ce50(0x1b6)](fs[_0x51ce50(0x1ab)](packageFile,_0x18cd2b['JemFH'])),_0x3ab596=[];for(let _0x2180ef=0x0;_0x18cd2b[_0x51ce50(0x1c2)](_0x2180ef,frameworks[_0x51ce50(0x1bc)]);_0x2180ef+=0x1){const _0x159cc5=_0x18cd2b['wPayT'](findScriptsWithFramework,_0x1263d6[_0x51ce50(0x1da)],frameworks[_0x2180ef]);for(let _0x4bb633=0x0;_0x18cd2b['xPhqY'](_0x4bb633,_0x159cc5['length']);_0x4bb633+=0x1){_0x3ab596[_0x51ce50(0x1d9)](_0x18cd2b[_0x51ce50(0x199)](getUpdatedCommand,_0x1263d6[_0x51ce50(0x1da)],_0x159cc5[_0x4bb633]));}_0x18cd2b['dEdWg'](addPostInstallScript,_0x1263d6[_0x51ce50(0x1da)],_0x3ab596);}const _0x2397f7={..._0x1263d6[_0x51ce50(0x1da)]},_0x314e40=_0x2397f7;for(let _0x332630=0x0;_0x18cd2b[_0x51ce50(0x1c0)](_0x332630,_0x3ab596[_0x51ce50(0x1bc)]);_0x332630+=0x1){_0x314e40[_0x3ab596[_0x332630][0x0]]=_0x3ab596[_0x332630][0x1];}_0x18cd2b[_0x51ce50(0x1af)](JSON[_0x51ce50(0x19b)](_0x1263d6['scripts']),JSON['stringify'](_0x314e40))&&(logger[_0x51ce50(0x1c4)](_0x18cd2b[_0x51ce50(0x1a2)]),_0x1263d6[_0x51ce50(0x1da)]=_0x314e40,fs[_0x51ce50(0x1aa)](packageFile,JSON['stringify'](_0x1263d6,null,0x2),_0x179ea4=>{_0x179ea4&&logger['error'](_0x179ea4);}));};function findScriptsWithFramework(_0x674250,_0xb11bbc){const _0x345c06=a45_0x2c8400,_0x165fb3={};_0x165fb3['ixCrG']=function(_0x3fe7d9,_0x56e4db){return _0x3fe7d9<_0x56e4db;},_0x165fb3[_0x345c06(0x1b0)]=_0x345c06(0x1d3);const _0xf7a8de=_0x165fb3,_0x578ece=[],_0x294e31=Object[_0x345c06(0x1d8)](_0x674250);for(let _0x46c2ac=0x0;_0xf7a8de[_0x345c06(0x1b9)](_0x46c2ac,_0x294e31[_0x345c06(0x1bc)]);_0x46c2ac+=0x1){_0x294e31[_0x46c2ac][0x1][_0x345c06(0x19d)](_0xb11bbc)&&!_0x294e31[_0x46c2ac][0x1][_0x345c06(0x19d)](_0xf7a8de[_0x345c06(0x1b0)])&&_0x578ece['push'](_0x294e31[_0x46c2ac][0x0]);}return _0x578ece;}function getUpdatedCommand(_0x4e9102,_0x549969){const _0x41ea5b=a45_0x2c8400,_0x45b1a8={};_0x45b1a8[_0x41ea5b(0x1b7)]=function(_0x3af2c2,_0x1f4e6b){return _0x3af2c2!==_0x1f4e6b;},_0x45b1a8['tqLAC']=_0x41ea5b(0x1d3),_0x45b1a8['ESDbH']=function(_0xa147d1,_0x257b79){return _0xa147d1===_0x257b79;};const _0x1dd3ff=_0x45b1a8,_0x407826=_0x549969+_0x41ea5b(0x1c6),_0x17a06c=_0x4e9102[_0x549969],_0x386601=_0x17a06c[_0x41ea5b(0x1bf)]('\x20');for(const _0x4c3cd5 of frameworks){if(_0x1dd3ff[_0x41ea5b(0x1b7)](_0x386601[_0x41ea5b(0x1d1)](_0x4c3cd5),-0x1)){_0x386601[_0x41ea5b(0x1dc)](_0x386601[_0x41ea5b(0x1d1)](_0x4c3cd5),0x0,_0x1dd3ff[_0x41ea5b(0x1ad)]);break;}}let _0x26dbb3=_0x386601['join']('\x20');return _0x1dd3ff[_0x41ea5b(0x197)](_0x26dbb3,_0x17a06c)&&(_0x26dbb3=_0x41ea5b(0x1bb)+_0x17a06c),[_0x407826,_0x26dbb3];}function sdkSetup(){const _0x27c788=a45_0x2c8400,_0x5dcb93={};_0x5dcb93['ctYWL']='node-setup',_0x5dcb93[_0x27c788(0x1d4)]=_0x27c788(0x1e0);const _0x56c8a2=_0x5dcb93;if(helper[_0x27c788(0x1a3)](config))return;config[_0x27c788(0x1b4)]=_0x56c8a2[_0x27c788(0x1bd)];try{utilities[_0x27c788(0x1c3)](_0x56c8a2['YXmeL'],{},config,'');}catch(_0x1452fd){logger[_0x27c788(0x1cb)](_0x27c788(0x19e)+_0x1452fd);}}logger[a45_0x2c8400(0x1c4)]('Setup\x20completed');