const a0_0x294f97=a0_0xbaa1;(function(_0x15e17b,_0x2a7631){const _0x50b898=a0_0xbaa1,_0x242fcd=_0x15e17b();while(!![]){try{const _0x35660d=parseInt(_0x50b898(0x112))/0x1*(-parseInt(_0x50b898(0x94))/0x2)+-parseInt(_0x50b898(0x175))/0x3+-parseInt(_0x50b898(0x7f))/0x4*(-parseInt(_0x50b898(0x1dc))/0x5)+-parseInt(_0x50b898(0xba))/0x6+-parseInt(_0x50b898(0xa4))/0x7+-parseInt(_0x50b898(0xc2))/0x8+-parseInt(_0x50b898(0x14c))/0x9*(-parseInt(_0x50b898(0xec))/0xa);if(_0x35660d===_0x2a7631)break;else _0x242fcd['push'](_0x242fcd['shift']());}catch(_0xd7b6a9){_0x242fcd['push'](_0x242fcd['shift']());}}}(a0_0x5aba,0x1c6f9));const fs=require('fs'),path=require('path'),yaml=require(a0_0x294f97(0x1c8)),awsSDK=require(a0_0x294f97(0xa8)),{logger}=require('../config/logger'),{CloudProvider}=require('./CloudProvider'),{sendAWSInfoToHST}=require(a0_0x294f97(0x1c0)),{createClusterStack}=require(a0_0x294f97(0xf3)),{createHubHaStack}=require(a0_0x294f97(0x119)),{deleteClusterAndDependencies,deleteRoutingDeps,deleteAgent}=require(a0_0x294f97(0xf7)),{createAutoscalerStack}=require(a0_0x294f97(0x133)),{getDirForConfig,reportToGalactusAndSendToEDS,kubeApply}=require(a0_0x294f97(0x16e)),{IAM_USER_NAME,AWS,WS_EVENTS,global_registry,messageTypes}=require(a0_0x294f97(0x1a2));class AWSCloudProvider extends CloudProvider{constructor(_0x36bcef,_0x1da3bc,_0x119982,_0x149985){super(AWS,_0x36bcef,_0x1da3bc,_0x119982,_0x149985);}async[a0_0x294f97(0xf4)](){const _0x5e3d45=a0_0x294f97;await super[_0x5e3d45(0xf4)]();const _0x44e769={};return _0x44e769[_0x5e3d45(0x16f)]=global_registry[_0x5e3d45(0xe7)],_0x44e769['accessKeyId']=global_registry[_0x5e3d45(0x11f)],_0x44e769[_0x5e3d45(0x163)]=global_registry[_0x5e3d45(0x162)],awsSDK[_0x5e3d45(0x140)]['update'](_0x44e769),this;}async[a0_0x294f97(0xa7)](){const _0x2db999=a0_0x294f97,_0x1e8164={'OKjxn':function(_0x1aaa85,_0x3be1f6){return _0x1aaa85(_0x3be1f6);}};_0x1e8164[_0x2db999(0x109)](sendAWSInfoToHST,this[_0x2db999(0x19d)]);}async['setCachedCredsInRegistry'](_0x3a008d){const _0x1e22b9=a0_0x294f97;global_registry[_0x1e22b9(0x11f)]=_0x3a008d[this[_0x1e22b9(0x173)]]['accessKey'],global_registry[_0x1e22b9(0x162)]=_0x3a008d[this[_0x1e22b9(0x173)]][_0x1e22b9(0x1b4)];}[a0_0x294f97(0x18b)](_0xc5f7dd){const _0x4cdf08=a0_0x294f97;return _0xc5f7dd[_0x4cdf08(0x1b1)][_0x4cdf08(0x194)]['ingress'][0x0][_0x4cdf08(0x9d)];}async['isBrowserstackCluster'](){const _0x1f4e7c=a0_0x294f97,_0x1aa103={'VynPc':_0x1f4e7c(0x12b),'FnsyO':function(_0x3e8383,_0x35fe57){return _0x3e8383(_0x35fe57);},'CeDsS':function(_0x154720,_0x2e091f){return _0x154720===_0x2e091f;},'Mfgkd':_0x1f4e7c(0x77),'yGTPw':_0x1f4e7c(0x1d3),'kgzFw':function(_0x11f9d2,_0x5dbcee){return _0x11f9d2===_0x5dbcee;},'ZEMgU':_0x1f4e7c(0xea),'ohSNd':'PXWQA','FSbqi':function(_0x3e7876,_0x179797){return _0x3e7876===_0x179797;},'BGNPC':_0x1f4e7c(0x126),'YSLDY':_0x1f4e7c(0x11c),'DeaXT':_0x1f4e7c(0x171)};try{if(_0x1aa103[_0x1f4e7c(0x17a)](_0x1aa103[_0x1f4e7c(0x1a8)],_0x1aa103[_0x1f4e7c(0xc1)])){const _0xd9f107={};_0xd9f107[_0x1f4e7c(0x101)]=_0x1aa103[_0x1f4e7c(0x115)];const _0x5dea4c=new _0xb20f74[(_0x1f4e7c(0x1b0))](_0xd9f107),_0x7991cf={};return _0x7991cf['clusterName']=this[_0x1f4e7c(0x128)],_0x7991cf[_0x1f4e7c(0x12c)]=_0x705ff6,_0x5dea4c[_0x1f4e7c(0xe1)](_0x7991cf)['promise']();}else{const _0x2c4fc0=await this['getClusterInfo']();if(_0x2c4fc0['cluster']){if(_0x1aa103[_0x1f4e7c(0x18d)](_0x1aa103['ZEMgU'],_0x1aa103['ohSNd']))return _0x22cfe4[_0x4a8f19[_0x1f4e7c(0x156)]]=_0x952e5e[_0x1f4e7c(0xc9)],_0x18eebb;else{const _0x380536=_0x2c4fc0[_0x1f4e7c(0xd3)][_0x1f4e7c(0x1d8)];return _0x380536&&_0x1aa103['FSbqi'](_0x380536[_0x1aa103['BGNPC']][_0x1f4e7c(0xc0)](),_0x1aa103[_0x1f4e7c(0x1d0)]);}}}}catch(_0x36b474){if(_0x1aa103['CeDsS'](_0x1aa103[_0x1f4e7c(0x155)],_0x1aa103[_0x1f4e7c(0x155)]))return![];else _0x1aa103[_0x1f4e7c(0x79)](_0x55aa53,!![]);}return![];}async[a0_0x294f97(0x1bc)](){return this['checkClusterCreated']();}async['getClusterInfo'](){const _0x16c1e2=a0_0x294f97,_0x524d15={};_0x524d15[_0x16c1e2(0x1d4)]='2017-11-01';const _0xe37b3=_0x524d15,_0xac3aa={};_0xac3aa[_0x16c1e2(0x101)]=_0xe37b3[_0x16c1e2(0x1d4)];const _0x277df5=new awsSDK['EKS'](_0xac3aa),_0xb11262={};return _0xb11262[_0x16c1e2(0x191)]=this[_0x16c1e2(0x128)],_0x277df5[_0x16c1e2(0x196)](_0xb11262)[_0x16c1e2(0x9a)]();}async[a0_0x294f97(0xa1)](_0xb5d8ae){const _0x5b65cb=a0_0x294f97,_0x37298e={};_0x37298e[_0x5b65cb(0x132)]='templates',_0x37298e[_0x5b65cb(0x1d5)]=_0x5b65cb(0x1a7),_0x37298e['Vdytd']=_0x5b65cb(0x1bb),_0x37298e['okDxD']='<ARN>';const _0x52cf46=_0x37298e,_0x29cffc=await fs[_0x5b65cb(0x95)](path['join'](__dirname,'..',_0x52cf46['oUcbf'],_0x52cf46[_0x5b65cb(0x1d5)]),_0x52cf46['Vdytd']),_0x145e39=yaml[_0x5b65cb(0x8c)](_0x29cffc);return _0x145e39['data'][_0x5b65cb(0xf5)]=_0x145e39['data'][_0x5b65cb(0xf5)][_0x5b65cb(0x15b)](_0x52cf46[_0x5b65cb(0x1c2)],_0xb5d8ae),_0x145e39;}async[a0_0x294f97(0x86)](_0x2a325f){const _0x1d4a0d=a0_0x294f97,_0x1204e2={};_0x1204e2[_0x1d4a0d(0x122)]=_0x1d4a0d(0x12b);const _0x3031a6=_0x1204e2,_0x4ad59c={};_0x4ad59c[_0x1d4a0d(0x101)]=_0x3031a6[_0x1d4a0d(0x122)];const _0x548f39=new awsSDK[(_0x1d4a0d(0x1b0))](_0x4ad59c),_0x30d523={};return _0x30d523[_0x1d4a0d(0x128)]=this['clusterName'],_0x30d523[_0x1d4a0d(0x12c)]=_0x2a325f,_0x548f39[_0x1d4a0d(0xe1)](_0x30d523)[_0x1d4a0d(0x9a)]();}async[a0_0x294f97(0x136)](){const _0x1ee3e1=a0_0x294f97,_0x315b74={'NnRMv':'Authmap\x20already\x20exists.\x20Not\x20updating','cUCNq':function(_0x27d253,_0x18e5ca){return _0x27d253!==_0x18e5ca;},'nWRrj':'AXzxm','qCcFO':_0x1ee3e1(0x83),'oiraA':_0x1ee3e1(0xdd),'yVCaX':'vPLfy','yUhiT':function(_0x5cbd31,_0x40f417){return _0x5cbd31(_0x40f417);},'jazug':'Esahg','TuytB':function(_0x1e10f3,_0x46e399){return _0x1e10f3===_0x46e399;},'DLVgj':'bvkeC','sjGck':_0x1ee3e1(0x12d),'BMzzK':'2017-11-01'};return new Promise((_0x1aafd,_0x8e78f8)=>{const _0xa5fc33=_0x1ee3e1,_0x21fa74={'RcPkQ':function(_0x1bac28,_0x2a113a){const _0x67474f=a0_0xbaa1;return _0x315b74[_0x67474f(0xcf)](_0x1bac28,_0x2a113a);},'xaYBL':function(_0x54fedb,_0x101a19){const _0x1dabd9=a0_0xbaa1;return _0x315b74[_0x1dabd9(0x1b9)](_0x54fedb,_0x101a19);},'Aczue':_0x315b74[_0xa5fc33(0xde)]};if(_0x315b74['TuytB'](_0x315b74[_0xa5fc33(0xa0)],_0x315b74[_0xa5fc33(0x18a)]))_0x300d25[_0xa5fc33(0x11f)]=_0x2e0575[this[_0xa5fc33(0x173)]][_0xa5fc33(0x1cb)],_0x5cea88[_0xa5fc33(0x162)]=_0x10d081[this[_0xa5fc33(0x173)]][_0xa5fc33(0x1b4)];else{const _0x2a334a={};_0x2a334a[_0xa5fc33(0x101)]=_0x315b74[_0xa5fc33(0x1db)];const _0x3aeeac=new awsSDK[(_0xa5fc33(0x1b0))](_0x2a334a);_0x3aeeac[_0xa5fc33(0x16c)]()[_0xa5fc33(0x9a)]()[_0xa5fc33(0x168)](_0x3dff66=>{const _0x23c0dc=_0xa5fc33,_0x385e60={};_0x385e60['JIyrx']=_0x315b74[_0x23c0dc(0xe3)];const _0x2a674d=_0x385e60;if(_0x315b74[_0x23c0dc(0x1b9)](_0x315b74[_0x23c0dc(0x146)],_0x315b74['qCcFO']))_0x3dff66['clusters'][_0x23c0dc(0x170)](this[_0x23c0dc(0x128)])&&(_0x315b74['cUCNq'](_0x315b74[_0x23c0dc(0x8f)],_0x315b74[_0x23c0dc(0xe9)])?_0x315b74[_0x23c0dc(0xcf)](_0x1aafd,!![]):_0x33391d[_0x23c0dc(0x14b)](_0x2a674d[_0x23c0dc(0x147)])),_0x315b74[_0x23c0dc(0xcf)](_0x1aafd,![]);else{const _0x4e13bd=[],_0x40ed22=[];_0x5de619[_0x23c0dc(0x1a6)][_0x23c0dc(0xb3)](_0x2137bd=>{const _0x2874e8=_0x23c0dc;_0x4e13bd[_0x2874e8(0xe0)](_0x2137bd[_0x2874e8(0xf9)]);});const _0x1aea95=_0x50055d[_0x23c0dc(0x9e)](_0x2388f4=>{const _0x4cfe83=_0x23c0dc;if(_0x4e13bd[_0x4cfe83(0x170)](_0x2388f4[_0x4cfe83(0xad)]))return!![];return _0x40ed22[_0x4cfe83(0xe0)](_0x2388f4),![];});_0x21fa74[_0x23c0dc(0x13d)](_0x541708,[_0x1aea95,_0x40ed22]);}})['catch'](_0x55953a=>{const _0x20adaa=_0xa5fc33;_0x21fa74[_0x20adaa(0xfd)](_0x21fa74[_0x20adaa(0x80)],_0x21fa74[_0x20adaa(0x80)])?_0x4ee721[_0x20adaa(0x190)]('Error\x20creating\x20mount\x20target\x20for\x20subnet\x20'+_0x18cc5c['value']+':',_0x437d4e):(logger[_0x20adaa(0x190)](_0x55953a),_0x21fa74[_0x20adaa(0x13d)](_0x8e78f8,_0x55953a));});}});}async['getUserInput'](_0x41c8e2,_0x3366cb){const _0xcc609e=a0_0x294f97,_0x435afd={'uurmo':function(_0x2aa1ac,_0x5f336c){return _0x2aa1ac(_0x5f336c);}},_0x30d717=this[_0xcc609e(0x173)][_0xcc609e(0x151)](),_0x1f049f=await _0x435afd[_0xcc609e(0x15a)](_0x41c8e2,_0x30d717+_0xcc609e(0x1a4)),_0x5cf22a=await _0x435afd[_0xcc609e(0x15a)](_0x41c8e2,_0x30d717+_0xcc609e(0xaf));global_registry[_0xcc609e(0x11f)]=_0x1f049f,global_registry[_0xcc609e(0x162)]=_0x5cf22a;const _0x521de3={};return _0x521de3[_0xcc609e(0x1cb)]=_0x1f049f,_0x521de3[_0xcc609e(0x1b4)]=_0x5cf22a,_0x3366cb[_0xcc609e(0x8e)][AWS]=_0x521de3,_0x3366cb;}async[a0_0x294f97(0x104)](){const _0x540326=a0_0x294f97,_0x570e5c={'HTzxX':function(_0x3e2559){return _0x3e2559();},'BkZHp':'aws_credentials','VZhNL':_0x540326(0x127),'EBGHp':_0x540326(0x110)},_0x14642d=_0x570e5c[_0x540326(0x1da)](getDirForConfig),_0xdd7c5f=await this[_0x540326(0x10a)](),_0x41d204=path[_0x540326(0x84)](_0x14642d,_0x570e5c[_0x540326(0x141)]),_0x5c69cd='[ats]\x0aaws_access_key_id\x20=\x20'+global_registry[_0x540326(0x11f)]+_0x540326(0x1a5)+global_registry[_0x540326(0x162)];fs[_0x540326(0x113)](_0x41d204,_0x5c69cd);let _0x29fdeb=await fs[_0x540326(0x95)](path[_0x540326(0x84)](__dirname,'..',_0x570e5c['VZhNL'],_0x570e5c[_0x540326(0x118)]));return _0x29fdeb=_0x29fdeb[_0x540326(0x188)](),_0x29fdeb=_0x29fdeb['replace'](/<CLUSTER_NAME>/g,this['clusterName']),_0x29fdeb=_0x29fdeb[_0x540326(0x15b)](/<CLUSTER_URL>/g,_0xdd7c5f[_0x540326(0xd3)][_0x540326(0x1ce)]),_0x29fdeb=_0x29fdeb[_0x540326(0x15b)](/<CERTIFICATE_DATA>/g,_0xdd7c5f[_0x540326(0xd3)][_0x540326(0x9c)]['data']),_0x29fdeb=_0x29fdeb['replace'](/<CLUSTER_REGION>/g,global_registry[_0x540326(0xe7)]),_0x29fdeb=_0x29fdeb[_0x540326(0x15b)](/<CLUSTER_NAME_USER>/g,IAM_USER_NAME),_0x29fdeb=_0x29fdeb['replace'](/<CLOUD_PROVIDER_ACCESS_KEY>/g,global_registry[_0x540326(0x11f)]),_0x29fdeb=_0x29fdeb[_0x540326(0x15b)](/<CLOUD_PROVIDER_SECRET>/g,global_registry['cloudProviderSecretKey']),_0x29fdeb=_0x29fdeb['replace'](/<AWS_CONFIG_FILE_PATH>/g,_0x41d204),_0x29fdeb;}async['setupNewCluster'](_0x44588e=null,_0x2b515a=null){const _0x326bc9=a0_0x294f97,_0x1f4a11={'VFcQH':function(_0x26cb22,_0xd94fcd){return _0x26cb22===_0xd94fcd;},'goVzS':_0x326bc9(0x126),'VBkWg':_0x326bc9(0x11c),'OvPlp':_0x326bc9(0x99),'uTKGV':_0x326bc9(0x16b),'imuAT':function(_0x5e93c7,_0x147bc4,_0x2f65c8,_0x5622f3,_0x56e170,_0x44640d){return _0x5e93c7(_0x147bc4,_0x2f65c8,_0x5622f3,_0x56e170,_0x44640d);},'jgTMB':_0x326bc9(0x135),'ecMTj':function(_0x36a14d,_0x260152){return _0x36a14d!==_0x260152;},'pDhRx':'pdokp','mnEZW':'DEkMb','KSSTx':_0x326bc9(0x1bd)},_0xef66b1={};_0xef66b1[_0x326bc9(0x10f)]=WS_EVENTS[_0x326bc9(0xd5)],_0xef66b1['message']=_0x1f4a11[_0x326bc9(0x85)],this['webSocketUtils'][_0x326bc9(0xb1)](this[_0x326bc9(0x19d)],_0xef66b1),logger[_0x326bc9(0x14b)](_0x1f4a11[_0x326bc9(0xc4)]);const _0x3b01f0=global_registry['minNodes'],_0x40d9ba=global_registry[_0x326bc9(0xe4)],_0x309515=await _0x1f4a11['imuAT'](createClusterStack,this['clusterName'],_0x3b01f0,_0x40d9ba,_0x44588e,_0x2b515a),_0x1050d0=_0x309515[_0x326bc9(0xc5)][0x0][_0x326bc9(0x73)][0x0][_0x326bc9(0xc9)]['split'](','),_0x258284=_0x309515['Stacks'][0x0][_0x326bc9(0x73)][0x1][_0x326bc9(0xc9)],_0xd721ca=_0x309515[_0x326bc9(0xc5)][0x0][_0x326bc9(0x73)][0x3][_0x326bc9(0xc9)],_0x494a61=_0x309515[_0x326bc9(0xc5)][0x0][_0x326bc9(0x73)][0x4]['OutputValue'];logger['info'](_0x1f4a11[_0x326bc9(0xdc)]),logger['info'](_0x326bc9(0x1d9)+_0xd721ca+'\x20'),logger['info'](_0x326bc9(0x178)+_0x258284+'\x20'),logger[_0x326bc9(0x14b)](_0x326bc9(0x13f)+_0x1050d0+'\x20'),logger[_0x326bc9(0x14b)](_0x326bc9(0x10c)+_0x494a61+'\x20');let _0xc9ca42=_0x326bc9(0x98)+_0xd721ca+_0x326bc9(0x88)+_0x258284+_0x326bc9(0xf2)+_0x1050d0+',\x20NodeRole\x20=>\x20'+_0x494a61;if(_0x1f4a11[_0x326bc9(0xe5)](_0x44588e,null)&&_0x1f4a11[_0x326bc9(0xe5)](_0x2b515a,null)){if(_0x1f4a11[_0x326bc9(0xa6)](_0x1f4a11[_0x326bc9(0x18f)],_0x1f4a11[_0x326bc9(0x18f)]))_0x100799['push'](_0x5a43ce[_0x326bc9(0xf9)]);else{const _0x590694=_0x309515[_0x326bc9(0xc5)][0x0][_0x326bc9(0x73)][0x2][_0x326bc9(0xc9)],_0x398773=_0x309515[_0x326bc9(0xc5)][0x0][_0x326bc9(0x73)][0x5]['OutputValue'][_0x326bc9(0x89)](',');_0x44588e=_0x590694;const _0x3674e7=[];for(const _0x106129 of _0x398773){if(_0x1f4a11[_0x326bc9(0xe5)](_0x1f4a11['mnEZW'],_0x1f4a11[_0x326bc9(0x172)])){const _0x4031cd=_0x281dac[_0x326bc9(0xd3)][_0x326bc9(0x1d8)];return _0x4031cd&&_0x1f4a11[_0x326bc9(0xe5)](_0x4031cd[_0x1f4a11[_0x326bc9(0x165)]][_0x326bc9(0xc0)](),_0x1f4a11[_0x326bc9(0xd8)]);}else{const _0x3e1d5f={};_0x3e1d5f['label']=_0x106129,_0x3e1d5f[_0x326bc9(0xad)]=_0x106129,_0x3674e7[_0x326bc9(0xe0)](_0x3e1d5f);}}_0x2b515a=_0x3674e7,logger[_0x326bc9(0x14b)]('VPC\x20=>\x20'+_0x590694+'\x20'),logger[_0x326bc9(0x14b)](_0x326bc9(0xe6)+_0x398773+'\x20'),_0xc9ca42+=_0x326bc9(0x1bf)+_0x590694+_0x326bc9(0x137)+_0x398773+',\x20';}}const _0x1a4ff2={};return _0x1a4ff2[_0x326bc9(0x10f)]=WS_EVENTS[_0x326bc9(0xd5)],_0x1a4ff2[_0x326bc9(0x14f)]=_0xc9ca42,this[_0x326bc9(0xa5)][_0x326bc9(0xb1)](this[_0x326bc9(0x19d)],_0x1a4ff2),[_0x44588e,_0x2b515a];}async[a0_0x294f97(0x193)](_0x3a8ee6,_0x3abeec){const _0x113a48=a0_0x294f97,_0x3003a6={'MoBRV':function(_0x195de0,_0x37637a){return _0x195de0(_0x37637a);},'pmukT':function(_0x4c14bc,_0x1f5892,_0x47a202){return _0x4c14bc(_0x1f5892,_0x47a202);}};await _0x3003a6[_0x113a48(0x177)](deleteAgent,_0x3a8ee6),await _0x3003a6[_0x113a48(0x177)](deleteRoutingDeps,_0x3a8ee6),await _0x3003a6[_0x113a48(0x1ac)](deleteClusterAndDependencies,_0x3abeec,this[_0x113a48(0x128)]);}async[a0_0x294f97(0x186)](_0x1aa08e,_0x28450b){const _0x2c351d=a0_0x294f97,_0x1298c6={'VMZYg':function(_0x245df7,_0x48a020){return _0x245df7(_0x48a020);},'hZQTG':function(_0x4b9d5e,_0xe2942c){return _0x4b9d5e(_0xe2942c);},'tqhBR':_0x2c351d(0x14d),'xWhfG':function(_0x2b0897,_0x5e1b04){return _0x2b0897===_0x5e1b04;},'MJOQk':'oJlUA','vbasa':_0x2c351d(0x145),'VKcKD':_0x2c351d(0x7d),'EfnOO':function(_0x1216dc,_0x3376d6){return _0x1216dc!==_0x3376d6;},'bkXUX':_0x2c351d(0xbc),'McpFr':_0x2c351d(0x192),'SawRj':function(_0x4ec188,_0x1fc8f7){return _0x4ec188===_0x1fc8f7;},'VrhlO':_0x2c351d(0x12a),'yhypG':function(_0x41fb67,_0x35b5f1){return _0x41fb67===_0x35b5f1;},'nxcoh':'dbSks','qUWCf':_0x2c351d(0xd2),'peZFH':function(_0x439ac7,_0x6dfe56,_0x3ccf70,_0x490e8e,_0x2f03c6,_0xa32fe8,_0x251ba5,_0x4ac78d){return _0x439ac7(_0x6dfe56,_0x3ccf70,_0x490e8e,_0x2f03c6,_0xa32fe8,_0x251ba5,_0x4ac78d);},'pfkfq':'create-grid-called','tQTsU':'reportToGalactusAndSendToEDS','LTbfp':_0x2c351d(0x82),'BqFYq':_0x2c351d(0x1af),'ugeJW':'vqjQf','tRrrw':_0x2c351d(0x9f),'nfgDv':_0x2c351d(0x1c1),'wqtyC':'error','dBGbN':function(_0x12f1cc,_0x918c07,_0x31e7d7){return _0x12f1cc(_0x918c07,_0x31e7d7);},'cZxNE':'kube-system'};let _0x59fe8e,_0x5c17a0;const _0x53c715={};_0x53c715[_0x2c351d(0x10f)]=WS_EVENTS[_0x2c351d(0xd5)],_0x53c715[_0x2c351d(0x14f)]=_0x1298c6[_0x2c351d(0x1cf)],this['webSocketUtils'][_0x2c351d(0xb1)](this[_0x2c351d(0x19d)],_0x53c715),logger[_0x2c351d(0x14b)](_0x1298c6[_0x2c351d(0x1cf)]);try{if(_0x1298c6[_0x2c351d(0xca)](_0x1298c6[_0x2c351d(0xf1)],_0x1298c6['McpFr'])){const _0x5bb613=await _0x1298c6[_0x2c351d(0x93)](createAutoscalerStack,this[_0x2c351d(0x128)]);_0x5c17a0=_0x5bb613[_0x2c351d(0xc5)][0x0][_0x2c351d(0x73)][0x2][_0x2c351d(0xc9)];const _0x12e25a={};_0x12e25a[_0x2c351d(0x10f)]=WS_EVENTS['LOG'],_0x12e25a['message']=_0x2c351d(0xff)+_0x5c17a0+'\x20',this[_0x2c351d(0xa5)][_0x2c351d(0xb1)](this[_0x2c351d(0x19d)],_0x12e25a),logger['info'](_0x2c351d(0xff)+_0x5c17a0+'\x20');}else{if(_0x3e4e75['includes'](_0x5d1a3f[_0x2c351d(0xad)]))return!![];return _0x38e2a6[_0x2c351d(0xe0)](_0x50c34e),![];}}catch(_0x231ffb){if(_0x1298c6[_0x2c351d(0x17c)](_0x1298c6['VrhlO'],_0x1298c6['VrhlO'])){if(_0x231ffb?.[_0x2c351d(0x14f)]&&_0x231ffb[_0x2c351d(0x14f)][_0x2c351d(0xb2)](/already exists/)){if(_0x1298c6[_0x2c351d(0x1d1)](_0x1298c6['nxcoh'],_0x1298c6['qUWCf'])){const _0xc480bd={};_0xc480bd['apiVersion']=_0x1298c6[_0x2c351d(0x78)],_0xc480bd[_0x2c351d(0x16f)]=_0x2b142f[_0x2c351d(0xe7)];const _0x37dc5f=new _0x109272[(_0x2c351d(0x182))](_0xc480bd);_0x37dc5f['describeVpcs'](_0xcb49cb)[_0x2c351d(0x9a)]()[_0x2c351d(0x168)](_0x47f967=>{const _0x4caf0b=_0x2c351d;_0x1298c6[_0x4caf0b(0xef)](_0x48709d,!![]);})['catch'](_0x560613=>{const _0x194732=_0x2c351d;_0x46b3fe[_0x194732(0x190)]('Cannot\x20find\x20VPC\x20'+_0x4f597e+_0x194732(0x13a)+_0x3da8da[_0x194732(0xe7)]+_0x194732(0x15f)),_0x1298c6[_0x194732(0x93)](_0x49372b,![]);});}else _0x59fe8e='Skipping\x20Autoscaler\x20due\x20to:\x20'+_0x231ffb[_0x2c351d(0x14f)],await _0x1298c6[_0x2c351d(0xbf)](reportToGalactusAndSendToEDS,_0x28450b,this[_0x2c351d(0x19d)],_0x59fe8e,messageTypes[_0x2c351d(0x129)],_0x1298c6[_0x2c351d(0xee)],_0x1298c6[_0x2c351d(0x107)],_0x1298c6[_0x2c351d(0xb9)]),logger[_0x2c351d(0xb8)](_0x59fe8e);}else{if(_0x1298c6[_0x2c351d(0x17c)](_0x1298c6[_0x2c351d(0x179)],_0x1298c6[_0x2c351d(0x1c5)])){const _0x576bb1=_0x11bc77['Stacks'][0x0]['Outputs'][0x2][_0x2c351d(0xc9)],_0x478966=_0x5eea4f[_0x2c351d(0xc5)][0x0][_0x2c351d(0x73)][0x5][_0x2c351d(0xc9)][_0x2c351d(0x89)](',');_0x5beb9c=_0x576bb1;const _0x69d835=[];for(const _0x356fe3 of _0x478966){const _0x2574e6={};_0x2574e6[_0x2c351d(0x1c4)]=_0x356fe3,_0x2574e6['value']=_0x356fe3,_0x69d835[_0x2c351d(0xe0)](_0x2574e6);}_0x3aba74=_0x69d835,_0x1bc2b3['info'](_0x2c351d(0x139)+_0x576bb1+'\x20'),_0x5efb92[_0x2c351d(0x14b)]('Subnets\x20=>\x20'+_0x478966+'\x20'),_0x30d07a+=_0x2c351d(0x1bf)+_0x576bb1+_0x2c351d(0x137)+_0x478966+',\x20';}else{const _0x163550=_0x1298c6[_0x2c351d(0x166)][_0x2c351d(0x89)]('|');let _0x2b59af=0x0;while(!![]){switch(_0x163550[_0x2b59af++]){case'0':_0x59fe8e=_0x2c351d(0x13b)+_0x231ffb?.[_0x2c351d(0x14f)]+_0x2c351d(0xfc);continue;case'1':logger['error'](_0x59fe8e);continue;case'2':await _0x1298c6['peZFH'](reportToGalactusAndSendToEDS,_0x28450b,this['rws'],_0x59fe8e,messageTypes[_0x2c351d(0x159)],_0x1298c6[_0x2c351d(0xee)],_0x1298c6['nfgDv'],_0x1298c6[_0x2c351d(0xe2)]);continue;case'3':await _0x1298c6[_0x2c351d(0x16d)](deleteClusterAndDependencies,global_registry['clusterRegion'],this[_0x2c351d(0x128)]);continue;case'4':process['exit'](0x1);continue;}break;}}}}else throw new _0x389a80(_0x2c351d(0xdf)+_0xd02587+_0x2c351d(0xd7));}const _0x2cc08e=await this['getNodeGroupInfo'](this[_0x2c351d(0x128)]+_0x2c351d(0xbb)),_0x5c43a3=_0x2cc08e[_0x2c351d(0x149)][_0x2c351d(0x176)],_0x437397=await this[_0x2c351d(0xa1)](_0x5c43a3),_0x1eb19b={};return _0x1eb19b[_0x2c351d(0xcb)]=_0x1298c6[_0x2c351d(0x8d)],_0x1eb19b['body']=_0x437397,await _0x1aa08e[_0x2c351d(0x12e)](_0x1eb19b)[_0x2c351d(0x150)](_0x401f7a=>{const _0x1e8e5b=_0x2c351d;if(_0x1298c6[_0x1e8e5b(0x102)](_0x1298c6[_0x1e8e5b(0x116)],_0x1298c6[_0x1e8e5b(0x116)]))logger['info'](_0x1298c6[_0x1e8e5b(0x10b)]);else return!![];}),_0x5c17a0;}async[a0_0x294f97(0xd1)](_0x35c50f,_0x485ef6,_0xd2018b,_0x6a3b8c,_0x410ff3){const _0x42a270=a0_0x294f97,_0x312b3c={'jMdGO':function(_0x3a5894,_0x7f75ea){return _0x3a5894(_0x7f75ea);},'gYGOj':function(_0x1c06ce,_0x49b81e){return _0x1c06ce===_0x49b81e;},'OLVvW':_0x42a270(0x164),'eFhqt':_0x42a270(0x15e),'BdEyU':_0x42a270(0x87),'MaQRb':function(_0x41048c,_0x505f35){return _0x41048c!==_0x505f35;},'birzm':_0x42a270(0x1cc),'LNmDZ':'Creating\x20required\x20resources\x20for\x20Hub\x20HA\x20-\x20IAM\x20Role\x20for\x20EFS\x20CSI\x20Controller,\x20Security\x20Group,\x20EFS','lcAxu':_0x42a270(0x174),'cvWmL':function(_0x393acf,_0x46f3d1,_0x4e2b51){return _0x393acf(_0x46f3d1,_0x4e2b51);},'UFNop':'EFSControllerRoleArn','GuoUw':'EFSFileSystemId','bNqhe':'EFSSecurityGroup','oyEoP':_0x42a270(0x135),'dpmrn':_0x42a270(0x125),'FUZZD':_0x42a270(0x11b),'dGgvn':'Adding\x20EFS\x20CSI\x20Driver','Blhfh':_0x42a270(0x127),'OPQCx':_0x42a270(0x1dd),'aDyBd':_0x42a270(0x74),'SQMpD':'utf-8','LZHqh':_0x42a270(0x17f),'PHueP':_0x42a270(0xbd),'MlqTW':'storage-class.yaml','HBjdG':'fileSystemId','eGSML':'Added\x20storage\x20class.','ZwBWh':_0x42a270(0xa9),'BNYfe':function(_0x2da0df,_0x1832ba){return _0x2da0df===_0x1832ba;},'guamU':_0x42a270(0x11a),'tCBiH':_0x42a270(0x157),'HDsVi':_0x42a270(0x97),'oJvBY':function(_0x29aab0,_0x47ecab,_0x378dcf){return _0x29aab0(_0x47ecab,_0x378dcf);},'VplSt':function(_0x3b2150,_0x13fa2b,_0x59734a,_0x5a6cf1,_0x5db727,_0x3531a6,_0x25f5d9,_0x57558c){return _0x3b2150(_0x13fa2b,_0x59734a,_0x5a6cf1,_0x5db727,_0x3531a6,_0x25f5d9,_0x57558c);},'WtHAA':_0x42a270(0x1a3),'xPTUY':'hub-ha-aws-setup-failed','pZgOP':_0x42a270(0x190)};logger['info'](_0x312b3c[_0x42a270(0x15d)]);let _0x1b8025;try{if(_0x312b3c[_0x42a270(0xf8)](_0x312b3c[_0x42a270(0xb6)],_0x312b3c['birzm']))_0x3fc41c[_0x42a270(0x190)](_0x136a3e),_0x312b3c[_0x42a270(0x96)](_0x3d1cd7,_0x2a2f39);else{const _0x39be39={};_0x39be39['type']=WS_EVENTS[_0x42a270(0xd5)],_0x39be39['message']=_0x312b3c[_0x42a270(0xce)],this['webSocketUtils'][_0x42a270(0xb1)](this[_0x42a270(0x19d)],_0x39be39),logger[_0x42a270(0x14b)](_0x312b3c[_0x42a270(0x131)]);const _0x4f48d8=await _0x312b3c[_0x42a270(0x103)](createHubHaStack,this[_0x42a270(0x128)],_0x6a3b8c),_0x3bc30c=_0x4f48d8[_0x42a270(0xc5)][0x0][_0x42a270(0x73)][_0x42a270(0x7a)]((_0x1b0085,_0x127c2d)=>{const _0x1418df=_0x42a270;return _0x312b3c[_0x1418df(0xc7)](_0x312b3c[_0x1418df(0xd9)],_0x312b3c[_0x1418df(0x16a)])?![]:(_0x1b0085[_0x127c2d[_0x1418df(0x156)]]=_0x127c2d[_0x1418df(0xc9)],_0x1b0085);},{}),_0x1b31b5=_0x3bc30c[_0x312b3c[_0x42a270(0x18e)]],_0x4a0d8b=_0x3bc30c[_0x312b3c['GuoUw']],_0x284cf0=_0x3bc30c[_0x312b3c[_0x42a270(0x12f)]];logger[_0x42a270(0x14b)](_0x312b3c[_0x42a270(0x154)]),logger['info'](_0x42a270(0xfb)+_0x1b31b5),logger[_0x42a270(0x14b)](_0x42a270(0x1c7)+_0x284cf0),logger[_0x42a270(0x14b)]('EFS\x20FileSystem\x20=>\x20'+_0x4a0d8b),_0x1b8025=_0x42a270(0x10d)+_0x1b31b5+',\x20EFS_SecurityGroup\x20=>\x20'+_0x284cf0+_0x42a270(0xae)+_0x4a0d8b,logger['info'](_0x312b3c[_0x42a270(0x1a1)]),await this[_0x42a270(0xac)](_0x410ff3,_0x284cf0,_0x4a0d8b);const _0x2071de={};_0x2071de['type']=WS_EVENTS['LOG'],_0x2071de[_0x42a270(0x14f)]=_0x1b8025,this[_0x42a270(0xa5)][_0x42a270(0xb1)](this[_0x42a270(0x19d)],_0x2071de);const _0xe8b4aa={};_0xe8b4aa[_0x42a270(0x10f)]=WS_EVENTS[_0x42a270(0xd5)],_0xe8b4aa[_0x42a270(0x14f)]=_0x312b3c['FUZZD'],this[_0x42a270(0xa5)]['sendEventToBackend'](this[_0x42a270(0x19d)],_0xe8b4aa),logger['info'](_0x312b3c[_0x42a270(0x181)]);let _0x16ea7b=await fs[_0x42a270(0x95)](path['join'](__dirname,'..',_0x312b3c['Blhfh'],_0x312b3c[_0x42a270(0xb7)],_0x312b3c['aDyBd']),_0x312b3c[_0x42a270(0x1d7)]);_0x16ea7b=_0x16ea7b['replace'](/<EfsCSIControllerARN>/g,_0x1b31b5);const _0x58ce4b=yaml[_0x42a270(0x1c3)](_0x16ea7b);await _0x312b3c['cvWmL'](kubeApply,_0x58ce4b,_0x485ef6),logger['info'](_0x312b3c[_0x42a270(0x7e)]),logger[_0x42a270(0x14b)](_0x312b3c[_0x42a270(0x199)]);const _0xe2252e=await fs[_0x42a270(0x95)](path[_0x42a270(0x84)](__dirname,'..',_0x312b3c[_0x42a270(0x1ad)],_0x312b3c['OPQCx'],_0x312b3c[_0x42a270(0x19c)]),_0x312b3c[_0x42a270(0x1d7)]),_0x1e4d4f=yaml[_0x42a270(0x8c)](_0xe2252e);_0x1e4d4f['parameters'][_0x312b3c['HBjdG']]=_0x4a0d8b;const _0x3b7102={};_0x3b7102[_0x42a270(0xb0)]=_0x1e4d4f;const _0xabe9ba=await _0x35c50f['createStorageClass'](_0x3b7102);logger['info'](_0x312b3c[_0x42a270(0x161)]);const _0x43741b={};_0x43741b[_0x42a270(0x10f)]=WS_EVENTS[_0x42a270(0xd5)],_0x43741b[_0x42a270(0x14f)]=_0x312b3c[_0x42a270(0x134)],this[_0x42a270(0xa5)][_0x42a270(0xb1)](this[_0x42a270(0x19d)],_0x43741b);}}catch(_0x45c6a4){if(_0x312b3c[_0x42a270(0x100)](_0x312b3c[_0x42a270(0x11e)],_0x312b3c[_0x42a270(0x11d)]))return _0x5239c8[_0x42a270(0x1b1)]['loadBalancer'][_0x42a270(0x19a)][0x0][_0x42a270(0x9d)];else{const _0x27508d=_0x312b3c[_0x42a270(0x76)][_0x42a270(0x89)]('|');let _0x4b7257=0x0;while(!![]){switch(_0x27508d[_0x4b7257++]){case'0':logger['error'](_0x1b8025);continue;case'1':await _0x312b3c[_0x42a270(0x1b6)](deleteClusterAndDependencies,global_registry[_0x42a270(0xe7)],this['clusterName']);continue;case'2':await _0x312b3c[_0x42a270(0x1d6)](reportToGalactusAndSendToEDS,_0xd2018b,this['rws'],_0x1b8025,messageTypes[_0x42a270(0x159)],_0x312b3c[_0x42a270(0x144)],_0x312b3c[_0x42a270(0x124)],_0x312b3c[_0x42a270(0xf6)]);continue;case'3':process[_0x42a270(0x121)](0x1);continue;case'4':_0x1b8025=_0x42a270(0x1b2)+_0x45c6a4[_0x42a270(0x14f)];continue;}break;}}}}async[a0_0x294f97(0xac)](_0x17da4a,_0x2f919e,_0x148975){const _0x3b2654=a0_0x294f97,_0x3d12d3={};_0x3d12d3[_0x3b2654(0x158)]=_0x3b2654(0x12b),_0x3d12d3[_0x3b2654(0x1d2)]=function(_0x41110b,_0x43d75f){return _0x41110b!==_0x43d75f;},_0x3d12d3['cGYkL']=_0x3b2654(0x7b),_0x3d12d3[_0x3b2654(0xab)]=_0x3b2654(0x160);const _0x233569=_0x3d12d3,_0x55cd06={};_0x55cd06[_0x3b2654(0x16f)]=global_registry[_0x3b2654(0xe7)];const _0x45dfa7=new awsSDK[(_0x3b2654(0x1a9))](_0x55cd06),_0x2ded46={};_0x2ded46['region']=global_registry[_0x3b2654(0xe7)];const _0x450ced=new awsSDK[(_0x3b2654(0x182))](_0x2ded46),_0x1507e7=new Set(),_0x4ddc12=[];for(const _0x595beb of _0x17da4a){if(_0x233569[_0x3b2654(0x1d2)](_0x233569['cGYkL'],_0x233569[_0x3b2654(0x1aa)]))return this[_0x3b2654(0x136)]();else{const _0x57fc2a=await this[_0x3b2654(0x106)](_0x450ced,_0x595beb[_0x3b2654(0xad)]);if(_0x1507e7[_0x3b2654(0x1b3)](_0x57fc2a)){if(_0x233569[_0x3b2654(0x1d2)](_0x233569[_0x3b2654(0xab)],_0x233569[_0x3b2654(0xab)])){const _0x4d401c={};_0x4d401c[_0x3b2654(0x101)]=_0x233569['zVYaA'];const _0xf7cc6d=new _0x208766[(_0x3b2654(0x1b0))](_0x4d401c),_0x2c4475={};return _0x2c4475[_0x3b2654(0x191)]=this[_0x3b2654(0x128)],_0xf7cc6d[_0x3b2654(0x196)](_0x2c4475)['promise']();}else{logger[_0x3b2654(0x14b)]('Skipping\x20subnet\x20'+_0x595beb[_0x3b2654(0xad)]+_0x3b2654(0x72)+_0x57fc2a+'\x20has\x20already\x20been\x20used.');continue;}}_0x1507e7[_0x3b2654(0x15c)](_0x57fc2a),_0x4ddc12['push'](this[_0x3b2654(0x1ba)](_0x45dfa7,_0x595beb,_0x2f919e,_0x148975));}}await Promise[_0x3b2654(0x17e)](_0x4ddc12);}async['createMountTargetAndWait'](_0x7baebe,_0xd2a0d9,_0x48d861,_0x2d97c3){const _0x539237=a0_0x294f97,_0x4d749d={'iiMwU':function(_0x33d35e,_0x1b0a12){return _0x33d35e(_0x1b0a12);},'rIZQr':function(_0x2156ed,_0x223f39){return _0x2156ed===_0x223f39;},'LLXac':_0x539237(0x18c),'cHMLf':function(_0x48a87b,_0x351779){return _0x48a87b===_0x351779;},'gWUcQ':_0x539237(0x148),'QAFpQ':_0x539237(0x9b)};try{if(_0x4d749d[_0x539237(0x1be)](_0x4d749d[_0x539237(0x81)],_0x4d749d[_0x539237(0x81)])){const _0x72d8e0={};_0x72d8e0[_0x539237(0xd4)]=_0x2d97c3,_0x72d8e0[_0x539237(0xf9)]=_0xd2a0d9['value'],_0x72d8e0[_0x539237(0x1ae)]=[_0x48d861];const _0x2c6214=await _0x7baebe['createMountTarget'](_0x72d8e0)[_0x539237(0x9a)](),_0x55a2be=_0x2c6214[_0x539237(0x183)];await this[_0x539237(0x14e)](_0x7baebe,_0xd2a0d9[_0x539237(0xad)],_0x55a2be);}else{const _0x380c54={};_0x380c54[_0x539237(0x1c4)]=_0x4678b9,_0x380c54[_0x539237(0xad)]=_0x340c25,_0x440fb0[_0x539237(0xe0)](_0x380c54);}}catch(_0x484d34){_0x4d749d['cHMLf'](_0x4d749d[_0x539237(0xda)],_0x4d749d[_0x539237(0x91)])?_0x4d749d[_0x539237(0x1ab)](_0x1a0000,this[_0x539237(0x19d)]):logger['error']('Error\x20creating\x20mount\x20target\x20for\x20subnet\x20'+_0xd2a0d9[_0x539237(0xad)]+':',_0x484d34);}}async['waitForMountTarget'](_0x27300e,_0x2fbe17,_0x1662a3){const _0x3e2e17=a0_0x294f97,_0x7d5623={'IedRq':function(_0x5efd70,_0x43c110){return _0x5efd70(_0x43c110);},'NMprO':function(_0x4fcd67,_0x35e732){return _0x4fcd67(_0x35e732);},'JWsoA':function(_0x3a3592,_0x1ee39b){return _0x3a3592(_0x1ee39b);},'EHyQQ':_0x3e2e17(0x14d),'BBZKQ':function(_0x5ebe3b,_0x3ab275){return _0x5ebe3b!==_0x3ab275;},'VrsLX':_0x3e2e17(0xd6),'xqLwE':function(_0x120993,_0x37eb20){return _0x120993!==_0x37eb20;},'SOERD':'UtQVC','jzYlA':_0x3e2e17(0x114),'qSEaZ':function(_0x145412,_0xb7dc7b){return _0x145412===_0xb7dc7b;},'PMExU':'NHBFd','DTjVi':_0x3e2e17(0x7c),'nwmAD':_0x3e2e17(0x152),'luCpd':'WdGxh'};let _0x47fc6f='';while(_0x7d5623[_0x3e2e17(0x1ca)](_0x47fc6f,_0x7d5623[_0x3e2e17(0x138)])){if(_0x7d5623[_0x3e2e17(0x180)](_0x7d5623['SOERD'],_0x7d5623[_0x3e2e17(0x169)])){const _0x3029ff={};_0x3029ff[_0x3e2e17(0x183)]=_0x1662a3;const _0x48bb01=await _0x27300e[_0x3e2e17(0xdb)](_0x3029ff)['promise']();_0x47fc6f=_0x48bb01['MountTargets'][0x0][_0x3e2e17(0x1a0)];if(_0x7d5623[_0x3e2e17(0x71)](_0x47fc6f,_0x7d5623[_0x3e2e17(0x138)])){if(_0x7d5623[_0x3e2e17(0x71)](_0x7d5623[_0x3e2e17(0x19f)],_0x7d5623[_0x3e2e17(0x19f)])){logger[_0x3e2e17(0x14b)](_0x3e2e17(0x123)+_0x2fbe17+_0x3e2e17(0x17d)+_0x1662a3+'.');break;}else _0x277e7e['clusters'][_0x3e2e17(0x170)](this[_0x3e2e17(0x128)])&&_0x7d5623[_0x3e2e17(0xc6)](_0x209880,!![]),_0x7d5623[_0x3e2e17(0xfa)](_0x2275dd,![]);}if(_0x7d5623[_0x3e2e17(0x71)](_0x47fc6f,_0x7d5623[_0x3e2e17(0x1b5)])){if(_0x7d5623[_0x3e2e17(0x180)](_0x7d5623[_0x3e2e17(0x187)],_0x7d5623[_0x3e2e17(0xb5)]))throw new Error(_0x3e2e17(0xdf)+_0x1662a3+_0x3e2e17(0xd7));else _0x3bf20c[_0x3e2e17(0x190)](_0x3e2e17(0x19b)+_0x4e969b+_0x3e2e17(0x13a)+_0x4b2965[_0x3e2e17(0xe7)]+'.\x20Error:\x20'+_0x5e5589),_0x7d5623[_0x3e2e17(0xb4)](_0x3927b4,[![],[]]);}await new Promise(_0x56c472=>setTimeout(_0x56c472,0x1388));}else{const _0x12c5d8={'lzhPF':function(_0x42c3b0,_0x50edb1){const _0x344cf6=_0x3e2e17;return _0x7d5623[_0x344cf6(0xfa)](_0x42c3b0,_0x50edb1);},'igoqA':function(_0x165040,_0x1d75aa){const _0x2936bf=_0x3e2e17;return _0x7d5623[_0x2936bf(0xfa)](_0x165040,_0x1d75aa);},'IDnaO':_0x7d5623[_0x3e2e17(0x10e)]},_0x497899={};_0x497899[_0x3e2e17(0x1c6)]=[_0x57376f];const _0x3263cf=_0x497899;return new _0x1f9b5f((_0x118240,_0x2720d0)=>{const _0x6f7238=_0x3e2e17,_0x2c5b7b={'Swkvv':function(_0x1eabf3,_0x2e2f37){const _0x1edb4b=a0_0xbaa1;return _0x12c5d8[_0x1edb4b(0x197)](_0x1eabf3,_0x2e2f37);}},_0x1def81={};_0x1def81[_0x6f7238(0x101)]=_0x12c5d8[_0x6f7238(0x13c)],_0x1def81['region']=_0x139e31[_0x6f7238(0xe7)];const _0x3e1693=new _0x44090e[(_0x6f7238(0x182))](_0x1def81);_0x3e1693[_0x6f7238(0x13e)](_0x3263cf)['promise']()[_0x6f7238(0x168)](_0x152947=>{_0x12c5d8['lzhPF'](_0x118240,!![]);})[_0x6f7238(0x150)](_0x39c481=>{const _0x32b5f8=_0x6f7238;_0x48763f['error']('Cannot\x20find\x20VPC\x20'+_0x4377ab+_0x32b5f8(0x13a)+_0xae1e14[_0x32b5f8(0xe7)]+_0x32b5f8(0x15f)),_0x2c5b7b[_0x32b5f8(0x14a)](_0x118240,![]);});});}}}async['getAvailabilityZone'](_0x2b1cc7,_0x342caa){const _0x1e3a2d=a0_0x294f97,_0x2fb4f6={};_0x2fb4f6[_0x1e3a2d(0x130)]=[_0x342caa];const _0xb05899=await _0x2b1cc7[_0x1e3a2d(0xa2)](_0x2fb4f6)['promise']();return _0xb05899[_0x1e3a2d(0x1a6)][0x0][_0x1e3a2d(0x198)];}[a0_0x294f97(0x189)](_0x45f958){const _0x492ad6=a0_0x294f97,_0x1c0ec3={'ulubW':function(_0x33caec,_0x5bc4ef){return _0x33caec(_0x5bc4ef);},'RWWZL':function(_0x3b9118,_0x492b93){return _0x3b9118===_0x492b93;},'bnAPa':_0x492ad6(0x1b7),'tHbgE':function(_0x385148,_0x1b90ee){return _0x385148(_0x1b90ee);},'KGVbA':'2017-11-01','PGXzw':_0x492ad6(0xe8),'UYPGf':function(_0x33801e,_0x34cc59){return _0x33801e(_0x34cc59);},'xAqhj':_0x492ad6(0x108),'UmkrI':'cZjxP','vMNnE':_0x492ad6(0x14d)},_0x216bd7={};_0x216bd7[_0x492ad6(0x1c6)]=[_0x45f958];const _0x95ba1c=_0x216bd7;return new Promise((_0xd37980,_0x7a5c9b)=>{const _0x52b19f=_0x492ad6,_0x39bad6={'LfNzG':function(_0x30ae79,_0xeb5b){const _0x233863=a0_0xbaa1;return _0x1c0ec3[_0x233863(0x117)](_0x30ae79,_0xeb5b);},'EMAxh':function(_0x70d17c,_0x68cdaa){return _0x1c0ec3['ulubW'](_0x70d17c,_0x68cdaa);},'hvllC':function(_0xcf89ed,_0x4b2dc0){const _0x21b31a=a0_0xbaa1;return _0x1c0ec3[_0x21b31a(0x167)](_0xcf89ed,_0x4b2dc0);},'MleSV':_0x1c0ec3[_0x52b19f(0x19e)],'zXimy':function(_0x5a7dfb,_0x436eff){const _0x15da6d=_0x52b19f;return _0x1c0ec3[_0x15da6d(0x8b)](_0x5a7dfb,_0x436eff);},'ibDiO':_0x1c0ec3[_0x52b19f(0xf0)],'ldbbB':function(_0x65d430,_0x105556){const _0x413db4=_0x52b19f;return _0x1c0ec3[_0x413db4(0x167)](_0x65d430,_0x105556);},'MvaNF':_0x1c0ec3[_0x52b19f(0x8a)],'QgfYY':function(_0x13d2b2,_0x57b76a){const _0x76e677=_0x52b19f;return _0x1c0ec3[_0x76e677(0x1b8)](_0x13d2b2,_0x57b76a);}};if(_0x1c0ec3[_0x52b19f(0x167)](_0x1c0ec3[_0x52b19f(0x105)],_0x1c0ec3[_0x52b19f(0x92)]))_0x39bad6[_0x52b19f(0xd0)](_0x306f4a,!![]);else{const _0x3b4bf3={};_0x3b4bf3['apiVersion']=_0x1c0ec3[_0x52b19f(0x185)],_0x3b4bf3[_0x52b19f(0x16f)]=global_registry[_0x52b19f(0xe7)];const _0x35e173=new awsSDK[(_0x52b19f(0x182))](_0x3b4bf3);_0x35e173[_0x52b19f(0x13e)](_0x95ba1c)[_0x52b19f(0x9a)]()[_0x52b19f(0x168)](_0x450a4d=>{const _0x440d31=_0x52b19f;_0x39bad6['hvllC'](_0x39bad6[_0x440d31(0xcd)],_0x39bad6[_0x440d31(0xcd)])?_0x39bad6['zXimy'](_0xd37980,!![]):(_0xb2e03e[_0x440d31(0x190)]('Cannot\x20find\x20VPC\x20'+_0x50ab3a+'\x20in\x20region\x20'+_0x3f6c13['clusterRegion']+_0x440d31(0x15f)),_0x39bad6[_0x440d31(0x17b)](_0x4ca36d,![]));})[_0x52b19f(0x150)](_0x2ac0c0=>{const _0x14fcfb=_0x52b19f,_0x341460={'isjyh':function(_0x24ebec,_0xa07789){const _0x4bdd27=a0_0xbaa1;return _0x39bad6[_0x4bdd27(0x1cd)](_0x24ebec,_0xa07789);},'tpTsE':_0x39bad6[_0x14fcfb(0xfe)]};if(_0x39bad6[_0x14fcfb(0xaa)](_0x39bad6[_0x14fcfb(0x90)],_0x39bad6[_0x14fcfb(0x90)]))logger[_0x14fcfb(0x190)](_0x14fcfb(0x120)+_0x45f958+_0x14fcfb(0x13a)+global_registry[_0x14fcfb(0xe7)]+_0x14fcfb(0x15f)),_0x39bad6['QgfYY'](_0xd37980,![]);else{const _0x247104={'lPnNn':function(_0x57651b,_0x3dbc60){const _0x3d2cb2=_0x14fcfb;return _0x341460[_0x3d2cb2(0xcc)](_0x57651b,_0x3dbc60);},'gTaBY':function(_0x968159,_0x45d665){return _0x341460['isjyh'](_0x968159,_0x45d665);}},_0x466911={};_0x466911[_0x14fcfb(0x101)]=_0x341460[_0x14fcfb(0xbe)];const _0x38de77=new _0x52b2c9['EKS'](_0x466911);_0x38de77['listClusters']()[_0x14fcfb(0x9a)]()[_0x14fcfb(0x168)](_0x3447da=>{const _0x5d7c6f=_0x14fcfb;_0x3447da[_0x5d7c6f(0xed)][_0x5d7c6f(0x170)](this[_0x5d7c6f(0x128)])&&_0x247104[_0x5d7c6f(0xc3)](_0x4ea849,!![]),_0x247104[_0x5d7c6f(0x195)](_0xbcad83,![]);})[_0x14fcfb(0x150)](_0x198260=>{const _0x64918d=_0x14fcfb;_0x273c43[_0x64918d(0x190)](_0x198260),_0x247104[_0x64918d(0x195)](_0xf4bf06,_0x198260);});}});}});}[a0_0x294f97(0x75)](_0x30685a,_0x53d5e6){const _0x4d8191=a0_0x294f97,_0x495016={'TgaNG':function(_0x2b2521,_0x2b4b66){return _0x2b2521(_0x2b4b66);},'aIWLI':'2016-11-15','cPTJu':_0x4d8191(0x111)},_0x1c651e={};_0x1c651e[_0x4d8191(0x143)]=_0x495016[_0x4d8191(0x153)],_0x1c651e[_0x4d8191(0xa3)]=[_0x53d5e6];const _0x1d8efb={};_0x1d8efb[_0x4d8191(0x142)]=[_0x1c651e];const _0x5796c5=_0x1d8efb;return new Promise((_0x2b72ac,_0xb0d389)=>{const _0x250c27=_0x4d8191,_0x22b628={};_0x22b628[_0x250c27(0x101)]=_0x495016[_0x250c27(0x1c9)],_0x22b628[_0x250c27(0x16f)]=global_registry[_0x250c27(0xe7)];const _0x4a5cc0=new awsSDK['EC2'](_0x22b628);_0x4a5cc0[_0x250c27(0xa2)](_0x5796c5)[_0x250c27(0x9a)]()['then'](_0xf48c1a=>{const _0x49fde1=_0x250c27,_0x476b8b=[],_0x465629=[];_0xf48c1a[_0x49fde1(0x1a6)]['forEach'](_0x1c4e67=>{const _0x55b3a6=_0x49fde1;_0x476b8b[_0x55b3a6(0xe0)](_0x1c4e67[_0x55b3a6(0xf9)]);});const _0x266912=_0x30685a[_0x49fde1(0x9e)](_0x319f1c=>{if(_0x476b8b['includes'](_0x319f1c['value']))return!![];return _0x465629['push'](_0x319f1c),![];});_0x495016[_0x49fde1(0xc8)](_0x2b72ac,[_0x266912,_0x465629]);})[_0x250c27(0x150)](_0xc1d9dd=>{const _0x244e5a=_0x250c27;logger[_0x244e5a(0x190)](_0x244e5a(0x19b)+_0x30685a+_0x244e5a(0x13a)+global_registry['clusterRegion']+'.\x20Error:\x20'+_0xc1d9dd),_0x495016['TgaNG'](_0x2b72ac,[![],[]]);});});}}const a0_0x40def6={};function a0_0xbaa1(_0x2bc3cc,_0x4e37be){const _0x5abab3=a0_0x5aba();return a0_0xbaa1=function(_0xbaa1bc,_0xa65f73){_0xbaa1bc=_0xbaa1bc-0x71;let _0x328478=_0x5abab3[_0xbaa1bc];return _0x328478;},a0_0xbaa1(_0x2bc3cc,_0x4e37be);}a0_0x40def6[a0_0x294f97(0x184)]=AWSCloudProvider,module[a0_0x294f97(0xeb)]=a0_0x40def6;function a0_0x5aba(){const _0x2848fe=['zVYaA','ERROR','uurmo','replace','add','BdEyU','RspQJ','.\x20Please\x20Check\x20and\x20try\x20again','NStcE','eGSML','cloudProviderSecretKey','secretAccessKey','YwbOD','goVzS','tRrrw','RWWZL','then','jzYlA','eFhqt','Creating\x20required\x20dependencies\x20-\x20EKS\x20Role(s),\x20VPC,\x20Subnets,\x20Security\x20Groups\x20and\x20Cluster\x20and\x20Node\x20Group(s)','listClusters','dBGbN','../utils/utilityMethods','region','includes','ZjtrB','KSSTx','cloudProviderName','Creating\x20required\x20dependencies\x20for\x20Hub\x20HA\x20-\x20IAM\x20Role\x20for\x20EFS\x20CSI\x20Controller,\x20Security\x20Group,\x20EFS','28596nMuYEo','nodeRole','MoBRV','ClusterRole\x20=>\x20','BqFYq','CeDsS','EMAxh','SawRj',',\x20MountTargetId:\x20','all','Added\x20EFS\x20CSI\x20Driver','xqLwE','dGgvn','EC2','MountTargetId','AWSCloudProvider','vMNnE','setupAutoscaler','nwmAD','toString','isVPCPresent','sjGck','getGridHostname','liDJo','kgzFw','UFNop','pDhRx','error','name','nXRmp','deleteCluster','loadBalancer','gTaBY','describeCluster','igoqA','AvailabilityZone','PHueP','ingress','Cannot\x20find\x20subnets\x20','MlqTW','rws','bnAPa','PMExU','LifeCycleState','dpmrn','../config/constants','create-grid-called','\x20ACCESS\x20KEY:\x20','\x0aaws_secret_access_key\x20=\x20','Subnets','aws-auth-cm.yaml','Mfgkd','EFS','cGYkL','iiMwU','pmukT','Blhfh','SecurityGroups','MVWIJ','EKS','status','Error\x20occurred\x20while\x20setting\x20up\x20Hub\x20HA\x20infra:\x20','has','secret','DTjVi','oJvBY','Ajjxd','UYPGf','cUCNq','createMountTargetAndWait','utf-8','isClusterPresent','evMQE','rIZQr',',VPC\x20=>\x20','../utils/hstUtils','autoscaler-creation-failed','okDxD','loadAll','label','ugeJW','VpcIds','EFS\x20SecurityGroup\x20=>\x20','js-yaml','aIWLI','BBZKQ','accessKey','LIZtU','zXimy','endpoint','VKcKD','YSLDY','yhypG','ejaiw','KLMZQ','mmYNI','mrMZr','VplSt','SQMpD','tags','Cluster\x20=>\x20','HTzxX','BMzzK','40yPIVIw','hubharesources','qSEaZ','\x20because\x20its\x20Availability\x20Zone\x20','Outputs','efs-csi-driver-aws.yaml','isSubnetsValid','HDsVi','DkLMY','tqhBR','FnsyO','reduce','fScqk','failed','Creating\x20Autoscaler\x20Role','LZHqh','31764OPVXeG','Aczue','LLXac','warning','SvCkR','join','OvPlp','getNodeGroupInfo','Setting\x20up\x20Hub\x20HA',',\x20ClusterRole\x20=>\x20','split','PGXzw','tHbgE','load','cZxNE','cloudProvider','oiraA','MvaNF','QAFpQ','UmkrI','hZQTG','22SZlScO','readFileAsync','jMdGO','4|2|0|1|3','Following\x20resources\x20are\x20created:\x20Cluster\x20=>\x20','Creating\x20required\x20resources\x20-\x20EKS\x20role(s),\x20VPC,\x20Subnets,\x20Security\x20Groups,\x20Cluster\x20and\x20Node\x20Group(s)','promise','aCSzR','certificateAuthority','hostname','every','0|2|1|3|4','DLVgj','createAuthConfigMap','describeSubnets','Values','412860VDTDcA','webSocketUtils','ecMTj','sendResourceDataToHST','aws-sdk','Created\x20EFS\x20CSI\x20Driver\x20&\x20Storage\x20Class','ldbbB','jrFfV','createMountTargets','value',',\x20EFS_FileSystem\x20=>\x20','\x20SECRET\x20KEY:\x20','body','sendEventToBackend','match','forEach','JWsoA','luCpd','birzm','OPQCx','warn','LTbfp','691254JUMLWM','-NodeGroup','qbXTv','Adding\x20storage\x20class...','tpTsE','peZFH','toLowerCase','yGTPw','726856AeSHmd','lPnNn','uTKGV','Stacks','IedRq','gYGOj','TgaNG','OutputValue','EfnOO','namespace','isjyh','MleSV','LNmDZ','yUhiT','LfNzG','setupHubHa','mfCMU','cluster','FileSystemId','LOG','available','\x20failed\x20to\x20reach\x20the\x20available\x20state.','VBkWg','OLVvW','gWUcQ','describeMountTargets','jgTMB','ktVrJ','jazug','Mount\x20target\x20','push','describeNodegroup','wqtyC','NnRMv','maxNodes','VFcQH','Subnets\x20=>\x20','clusterRegion','KfqsD','yVCaX','sEVPY','exports','4718760boFLLh','clusters','pfkfq','VMZYg','KGVbA','bkXUX',',\x20SecurityGroups\x20=>\x20','../utils/createClusterStack','init','mapRoles','pZgOP','../utils/gridComponents','MaQRb','SubnetId','NMprO','EFS\x20Controller\x20Role\x20=>\x20','.\x20Deleting\x20all\x20the\x20stacks','xaYBL','ibDiO','Autoscaler\x20Role\x20created.ARN:\x20','BNYfe','apiVersion','xWhfG','cvWmL','getKubeConfigData','xAqhj','getAvailabilityZone','tQTsU','ReSSP','OKjxn','getClusterInfo','vbasa','NodeRole\x20=>\x20','Following\x20resources\x20are\x20created\x20for\x20Hub\x20HA:\x20EFS_ControllerRoleArn\x20=>\x20','EHyQQ','type','KubeConfigTemplate.yaml','vpc-id','13123hVvikm','writeFileSync','SpEfF','VynPc','MJOQk','ulubW','EBGHp','../utils/createHubHaStack','wVhBZ','Creating\x20EFS\x20CSI\x20Driver\x20&\x20Storage\x20Class','browserstack','tCBiH','guamU','cloudProviderAccessKey','Cannot\x20find\x20VPC\x20','exit','vuHPp','Mount\x20target\x20created\x20for\x20subnet:\x20','xPTUY','Mounting\x20Target\x20for\x20EFS','browserstack:managedBy','templates','clusterName','WARNING','vWoMq','2017-11-01','nodegroupName','kEmja','createNamespacedConfigMap','bNqhe','SubnetIds','lcAxu','oUcbf','../utils/createAutoscalerStack','ZwBWh','Following\x20resources\x20are\x20created:','checkClusterCreated',',\x20Subnets\x20=>\x20','VrsLX','VPC\x20=>\x20','\x20in\x20region\x20','Unable\x20to\x20spawn\x20Autoscaler\x20due\x20to:\x20','IDnaO','RcPkQ','describeVpcs','SecurityGroups\x20=>\x20','config','BkZHp','Filters','Name','WtHAA','Authmap\x20already\x20exists.\x20Not\x20updating','nWRrj','JIyrx','MYsrC','nodegroup','Swkvv','info','9GdtrYb','2016-11-15','waitForMountTarget','message','catch','toUpperCase','TxcDQ','cPTJu','oyEoP','DeaXT','OutputKey','ZeKMD'];a0_0x5aba=function(){return _0x2848fe;};return a0_0x5aba();}